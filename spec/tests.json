{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "version": "0.6.1",
  "description": "hron conformance test suite. All eval tests use now=2026-02-06T12:00:00+00:00[UTC] (Friday) unless overridden per-test.",
  "now": "2026-02-06T12:00:00+00:00[UTC]",
  "_eval_assertion_types": {
    "next": "Full timestamp of the next occurrence from now. null means no future occurrence exists.",
    "next_date": "Date-only (YYYY-MM-DD) of the next occurrence. Implementations should call next_from(now) and compare only the date component.",
    "next_n": "Array of full timestamps for N consecutive occurrences. N defaults to the array length; if next_n_count is provided, request that many and compare the returned array.",
    "next_n_count": "How many occurrences to request from next_n_from(). Defaults to next_n array length if omitted.",
    "next_n_length": "Expected number of results when exact timestamps are not specified (use instead of next_n when only the count matters).",
    "matches": "Boolean: does the expression match the given datetime? Tests are in eval.matches section with 'datetime' and 'expected' fields."
  },
  "_behavioral_notes": {
    "time_boundary": "next_from uses strict greater-than (>). If now equals an occurrence time exactly, that occurrence is skipped.",
    "week_repeat_default_anchor": "When no 'starting' clause is given, week_repeat uses epoch Monday (1970-01-05) as the anchor for computing week parity.",
    "day_skip": "If a month doesn't have the requested day (e.g., Feb 30), that month is skipped entirely.",
    "named_date_recurrence": "Named exceptions (e.g., 'except dec 25') recur every year. ISO exceptions (e.g., 'except 2026-12-25') apply to that one date only.",
    "cron_limitations": "from_cron supports standard 5-field cron including ranges, steps, L (last day), W (nearest weekday), # (nth weekday), @ shortcuts, and named months/days. Directional nearest weekday (next/previous) is hron-only and cannot be converted to cron.",
    "interval_anchor": "For day/month/year/ordinal intervals > 1, alignment is computed from the anchor date. Default anchor is epoch (1970-01-01). The 'starting' clause overrides it. Formula: (date_offset - anchor_offset) mod interval == 0.",
    "contradictory_schedules": "Schedules with mutually exclusive constraints (e.g., 'until' before 'starting', impossible day-of-month + 'during' filter) are syntactically valid and must parse successfully. Evaluation returns empty results (no occurrences). Implementations must not error or loop infinitely."
  },
  "parse": {
    "description": "Parse roundtrip tests. Input parses successfully; canonical is the expected Display output. parse(input).to_string() == canonical, and parse(canonical).to_string() == canonical.",
    "day_repeat": {
      "tests": [
        {
          "name": "every_day",
          "input": "every day at 09:00",
          "canonical": "every day at 09:00"
        },
        {
          "name": "every_day_no_leading_zero",
          "input": "every day at 9:00",
          "canonical": "every day at 09:00"
        },
        {
          "name": "every_day_midnight",
          "input": "every day at 00:00",
          "canonical": "every day at 00:00"
        },
        {
          "name": "every_day_end_of_day",
          "input": "every day at 23:59",
          "canonical": "every day at 23:59"
        },
        {
          "name": "weekday",
          "input": "every weekday at 9:00",
          "canonical": "every weekday at 09:00"
        },
        {
          "name": "weekday_plural",
          "input": "every weekdays at 9:00",
          "canonical": "every weekday at 09:00"
        },
        {
          "name": "weekend",
          "input": "every weekend at 10:00",
          "canonical": "every weekend at 10:00"
        },
        {
          "name": "weekend_plural",
          "input": "every weekends at 10:00",
          "canonical": "every weekend at 10:00"
        },
        {
          "name": "monday",
          "input": "every monday at 9:00",
          "canonical": "every monday at 09:00"
        },
        {
          "name": "tuesday",
          "input": "every tuesday at 14:30",
          "canonical": "every tuesday at 14:30"
        },
        {
          "name": "wednesday",
          "input": "every wednesday at 10:00",
          "canonical": "every wednesday at 10:00"
        },
        {
          "name": "thursday",
          "input": "every thursday at 11:15",
          "canonical": "every thursday at 11:15"
        },
        {
          "name": "friday",
          "input": "every friday at 17:00",
          "canonical": "every friday at 17:00"
        },
        {
          "name": "saturday",
          "input": "every saturday at 08:00",
          "canonical": "every saturday at 08:00"
        },
        {
          "name": "sunday",
          "input": "every sunday at 10:00",
          "canonical": "every sunday at 10:00"
        },
        {
          "name": "short_mon",
          "input": "every mon at 9:00",
          "canonical": "every monday at 09:00"
        },
        {
          "name": "short_tue",
          "input": "every tue at 9:00",
          "canonical": "every tuesday at 09:00"
        },
        {
          "name": "short_wed",
          "input": "every wed at 9:00",
          "canonical": "every wednesday at 09:00"
        },
        {
          "name": "short_thu",
          "input": "every thu at 9:00",
          "canonical": "every thursday at 09:00"
        },
        {
          "name": "short_fri",
          "input": "every fri at 9:00",
          "canonical": "every friday at 09:00"
        },
        {
          "name": "short_sat",
          "input": "every sat at 9:00",
          "canonical": "every saturday at 09:00"
        },
        {
          "name": "short_sun",
          "input": "every sun at 9:00",
          "canonical": "every sunday at 09:00"
        },
        {
          "name": "multi_day_mon_wed_fri",
          "input": "every mon, wed, fri at 9:00",
          "canonical": "every monday, wednesday, friday at 09:00"
        },
        {
          "name": "multi_day_tue_thu",
          "input": "every tue, thu at 14:00",
          "canonical": "every tuesday, thursday at 14:00"
        },
        {
          "name": "multi_time_two",
          "input": "every day at 9:00, 17:00",
          "canonical": "every day at 09:00, 17:00"
        },
        {
          "name": "multi_time_three",
          "input": "every day at 9:00, 12:00, 17:00",
          "canonical": "every day at 09:00, 12:00, 17:00"
        },
        {
          "name": "multi_time_weekday",
          "input": "every weekday at 9:00, 12:00, 17:00",
          "canonical": "every weekday at 09:00, 12:00, 17:00"
        },
        {
          "name": "multi_time_weekend",
          "input": "every weekend at 10:00, 14:00",
          "canonical": "every weekend at 10:00, 14:00"
        },
        {
          "name": "multi_time_specific_day",
          "input": "every monday at 9:00, 13:00",
          "canonical": "every monday at 09:00, 13:00"
        },
        {
          "name": "multi_time_multi_day",
          "input": "every mon, wed, fri at 9:00, 17:00",
          "canonical": "every monday, wednesday, friday at 09:00, 17:00"
        },
        {
          "name": "every_2_days",
          "input": "every 2 days at 09:00",
          "canonical": "every 2 days at 09:00"
        },
        {
          "name": "every_3_days",
          "input": "every 3 days at 09:00",
          "canonical": "every 3 days at 09:00"
        },
        {
          "name": "every_5_days",
          "input": "every 5 days at 17:00",
          "canonical": "every 5 days at 17:00"
        },
        {
          "name": "every_7_days",
          "input": "every 7 days at 09:00",
          "canonical": "every 7 days at 09:00"
        },
        {
          "name": "every_10_days",
          "input": "every 10 days at 12:00",
          "canonical": "every 10 days at 12:00"
        },
        {
          "name": "every_2_days_multi_time",
          "input": "every 2 days at 09:00, 17:00",
          "canonical": "every 2 days at 09:00, 17:00"
        },
        {
          "name": "every_3_days_with_starting",
          "input": "every 3 days at 09:00 starting 2026-02-06",
          "canonical": "every 3 days at 09:00 starting 2026-02-06"
        },
        {
          "name": "every_1_day_normalized",
          "input": "every 1 day at 09:00",
          "canonical": "every day at 09:00"
        }
      ]
    },
    "interval_repeat": {
      "tests": [
        {
          "name": "30_min",
          "input": "every 30 min from 09:00 to 17:00",
          "canonical": "every 30 min from 09:00 to 17:00"
        },
        {
          "name": "45_min",
          "input": "every 45 min from 09:00 to 17:00",
          "canonical": "every 45 min from 09:00 to 17:00"
        },
        {
          "name": "15_min",
          "input": "every 15 min from 08:00 to 20:00",
          "canonical": "every 15 min from 08:00 to 20:00"
        },
        {
          "name": "1_minute",
          "input": "every 1 minute from 09:00 to 09:30",
          "canonical": "every 1 minute from 09:00 to 09:30"
        },
        {
          "name": "2_hours",
          "input": "every 2 hours from 08:00 to 20:00",
          "canonical": "every 2 hours from 08:00 to 20:00"
        },
        {
          "name": "1_hour",
          "input": "every 1 hour from 00:00 to 23:59",
          "canonical": "every 1 hour from 00:00 to 23:59"
        },
        {
          "name": "30_min_full_day",
          "input": "every 30 min from 00:00 to 23:59",
          "canonical": "every 30 min from 00:00 to 23:59"
        },
        {
          "name": "on_weekdays",
          "input": "every 45 min from 09:00 to 17:00 on weekdays",
          "canonical": "every 45 min from 09:00 to 17:00 on weekday"
        },
        {
          "name": "on_weekends",
          "input": "every 30 min from 10:00 to 18:00 on weekends",
          "canonical": "every 30 min from 10:00 to 18:00 on weekend"
        },
        {
          "name": "on_specific_days",
          "input": "every 30 min from 09:00 to 17:00 on mon, wed, fri",
          "canonical": "every 30 min from 09:00 to 17:00 on monday, wednesday, friday"
        },
        {
          "name": "unit_mins",
          "input": "every 10 mins from 09:00 to 17:00",
          "canonical": "every 10 min from 09:00 to 17:00"
        },
        {
          "name": "unit_minutes",
          "input": "every 20 minutes from 09:00 to 17:00",
          "canonical": "every 20 min from 09:00 to 17:00"
        },
        {
          "name": "unit_hr",
          "input": "every 3 hr from 06:00 to 18:00",
          "canonical": "every 3 hours from 06:00 to 18:00"
        },
        {
          "name": "unit_hrs",
          "input": "every 4 hrs from 00:00 to 23:59",
          "canonical": "every 4 hours from 00:00 to 23:59"
        }
      ]
    },
    "week_repeat": {
      "tests": [
        {
          "name": "every_2_weeks",
          "input": "every 2 weeks on monday at 9:00",
          "canonical": "every 2 weeks on monday at 09:00"
        },
        {
          "name": "every_3_weeks",
          "input": "every 3 weeks on friday at 15:00",
          "canonical": "every 3 weeks on friday at 15:00"
        },
        {
          "name": "every_4_weeks_multi_day",
          "input": "every 4 weeks on mon, wed at 10:00",
          "canonical": "every 4 weeks on monday, wednesday at 10:00"
        },
        {
          "name": "multi_time",
          "input": "every 2 weeks on monday at 9:00, 17:00",
          "canonical": "every 2 weeks on monday at 09:00, 17:00"
        },
        {
          "name": "multi_time_three",
          "input": "every 3 weeks on friday at 9:00, 12:00, 17:00",
          "canonical": "every 3 weeks on friday at 09:00, 12:00, 17:00"
        }
      ]
    },
    "month_repeat": {
      "tests": [
        {
          "name": "1st",
          "input": "every month on the 1st at 9:00",
          "canonical": "every month on the 1st at 09:00"
        },
        {
          "name": "2nd",
          "input": "every month on the 2nd at 9:00",
          "canonical": "every month on the 2nd at 09:00"
        },
        {
          "name": "3rd",
          "input": "every month on the 3rd at 9:00",
          "canonical": "every month on the 3rd at 09:00"
        },
        {
          "name": "15th",
          "input": "every month on the 15th at 9:00",
          "canonical": "every month on the 15th at 09:00"
        },
        {
          "name": "11th",
          "input": "every month on the 11th at 9:00",
          "canonical": "every month on the 11th at 09:00"
        },
        {
          "name": "12th",
          "input": "every month on the 12th at 9:00",
          "canonical": "every month on the 12th at 09:00"
        },
        {
          "name": "13th",
          "input": "every month on the 13th at 9:00",
          "canonical": "every month on the 13th at 09:00"
        },
        {
          "name": "21st",
          "input": "every month on the 21st at 9:00",
          "canonical": "every month on the 21st at 09:00"
        },
        {
          "name": "22nd",
          "input": "every month on the 22nd at 9:00",
          "canonical": "every month on the 22nd at 09:00"
        },
        {
          "name": "23rd",
          "input": "every month on the 23rd at 9:00",
          "canonical": "every month on the 23rd at 09:00"
        },
        {
          "name": "31st",
          "input": "every month on the 31st at 9:00",
          "canonical": "every month on the 31st at 09:00"
        },
        {
          "name": "multi_day_1st_15th",
          "input": "every month on the 1st, 15th at 9:00",
          "canonical": "every month on the 1st, 15th at 09:00"
        },
        {
          "name": "multi_day_three",
          "input": "every month on the 1st, 10th, 20th at 12:00",
          "canonical": "every month on the 1st, 10th, 20th at 12:00"
        },
        {
          "name": "last_day",
          "input": "every month on the last day at 17:00",
          "canonical": "every month on the last day at 17:00"
        },
        {
          "name": "last_weekday",
          "input": "every month on the last weekday at 15:00",
          "canonical": "every month on the last weekday at 15:00"
        },
        {
          "name": "multi_time_1st",
          "input": "every month on the 1st at 9:00, 17:00",
          "canonical": "every month on the 1st at 09:00, 17:00"
        },
        {
          "name": "multi_time_multi_day",
          "input": "every month on the 1st, 15th at 9:00, 17:00",
          "canonical": "every month on the 1st, 15th at 09:00, 17:00"
        },
        {
          "name": "day_range_simple",
          "input": "every month on the 1st to 5th at 9:00",
          "canonical": "every month on the 1st to 5th at 09:00"
        },
        {
          "name": "day_range_mixed_with_single",
          "input": "every month on the 1st to 3rd, 15th at 9:00",
          "canonical": "every month on the 1st to 3rd, 15th at 09:00"
        },
        {
          "name": "day_range_large",
          "input": "every month on the 10th to 20th at 12:00",
          "canonical": "every month on the 10th to 20th at 12:00"
        },
        {
          "name": "day_range_single_then_range",
          "input": "every month on the 1st, 10th to 15th at 9:00",
          "canonical": "every month on the 1st, 10th to 15th at 09:00"
        },
        {
          "name": "day_range_multiple_ranges",
          "input": "every month on the 1st to 5th, 10th to 15th at 9:00",
          "canonical": "every month on the 1st to 5th, 10th to 15th at 09:00"
        },
        {
          "name": "day_range_multi_time",
          "input": "every month on the 1st to 5th at 9:00, 17:00",
          "canonical": "every month on the 1st to 5th at 09:00, 17:00"
        },
        {
          "name": "day_range_full_month",
          "input": "every month on the 1st to 31st at 9:00",
          "canonical": "every month on the 1st to 31st at 09:00"
        },
        {
          "name": "every_2_months",
          "input": "every 2 months on the 1st at 09:00",
          "canonical": "every 2 months on the 1st at 09:00"
        },
        {
          "name": "every_3_months",
          "input": "every 3 months on the 15th at 09:00",
          "canonical": "every 3 months on the 15th at 09:00"
        },
        {
          "name": "every_6_months",
          "input": "every 6 months on the 1st at 09:00",
          "canonical": "every 6 months on the 1st at 09:00"
        },
        {
          "name": "every_2_months_multi_day",
          "input": "every 2 months on the 1st, 15th at 09:00",
          "canonical": "every 2 months on the 1st, 15th at 09:00"
        },
        {
          "name": "every_3_months_multi_time",
          "input": "every 3 months on the 1st at 09:00, 17:00",
          "canonical": "every 3 months on the 1st at 09:00, 17:00"
        },
        {
          "name": "every_2_months_last_day",
          "input": "every 2 months on the last day at 17:00",
          "canonical": "every 2 months on the last day at 17:00"
        },
        {
          "name": "every_1_month_normalized",
          "input": "every 1 month on the 1st at 09:00",
          "canonical": "every month on the 1st at 09:00"
        },
        {
          "name": "every_2_months_last_weekday",
          "input": "every 2 months on the last weekday at 15:00",
          "canonical": "every 2 months on the last weekday at 15:00"
        },
        {
          "name": "nearest_weekday_15th",
          "input": "every month on the nearest weekday to 15th at 09:00",
          "canonical": "every month on the nearest weekday to 15th at 09:00"
        },
        {
          "name": "nearest_weekday_1st",
          "input": "every month on the nearest weekday to 1st at 09:00",
          "canonical": "every month on the nearest weekday to 1st at 09:00"
        },
        {
          "name": "nearest_weekday_31st",
          "input": "every month on the nearest weekday to 31st at 17:00",
          "canonical": "every month on the nearest weekday to 31st at 17:00"
        },
        {
          "name": "every_2_months_nearest_weekday",
          "input": "every 2 months on the nearest weekday to 15th at 09:00",
          "canonical": "every 2 months on the nearest weekday to 15th at 09:00"
        },
        {
          "name": "next_nearest_weekday",
          "input": "every month on the next nearest weekday to 15th at 09:00",
          "canonical": "every month on the next nearest weekday to 15th at 09:00"
        },
        {
          "name": "previous_nearest_weekday",
          "input": "every month on the previous nearest weekday to 15th at 09:00",
          "canonical": "every month on the previous nearest weekday to 15th at 09:00"
        },
        {
          "name": "previous_nearest_weekday_1st",
          "input": "every month on the previous nearest weekday to 1st at 09:00",
          "canonical": "every month on the previous nearest weekday to 1st at 09:00"
        },
        {
          "name": "ordinal_first_monday",
          "input": "every month on the first monday at 10:00",
          "canonical": "every month on the first monday at 10:00"
        },
        {
          "name": "ordinal_second_tuesday",
          "input": "every month on the second tuesday at 14:30",
          "canonical": "every month on the second tuesday at 14:30"
        },
        {
          "name": "ordinal_third_wednesday",
          "input": "every month on the third wednesday at 09:00",
          "canonical": "every month on the third wednesday at 09:00"
        },
        {
          "name": "ordinal_fourth_thursday",
          "input": "every month on the fourth thursday at 11:00",
          "canonical": "every month on the fourth thursday at 11:00"
        },
        {
          "name": "ordinal_fifth_friday",
          "input": "every month on the fifth friday at 16:00",
          "canonical": "every month on the fifth friday at 16:00"
        },
        {
          "name": "ordinal_last_friday",
          "input": "every month on the last friday at 16:00",
          "canonical": "every month on the last friday at 16:00"
        },
        {
          "name": "ordinal_last_sunday",
          "input": "every month on the last sunday at 08:00",
          "canonical": "every month on the last sunday at 08:00"
        },
        {
          "name": "ordinal_first_saturday",
          "input": "every month on the first saturday at 10:00",
          "canonical": "every month on the first saturday at 10:00"
        },
        {
          "name": "ordinal_multi_time_first_monday",
          "input": "every month on the first monday at 10:00, 14:00",
          "canonical": "every month on the first monday at 10:00, 14:00"
        },
        {
          "name": "ordinal_multi_time_last_friday",
          "input": "every month on the last friday at 9:00, 17:00",
          "canonical": "every month on the last friday at 09:00, 17:00"
        },
        {
          "name": "ordinal_first_monday_every_2_months",
          "input": "every 2 months on the first monday at 10:00",
          "canonical": "every 2 months on the first monday at 10:00"
        },
        {
          "name": "ordinal_first_monday_every_3_months",
          "input": "every 3 months on the first monday at 10:00",
          "canonical": "every 3 months on the first monday at 10:00"
        },
        {
          "name": "ordinal_last_friday_every_2_months",
          "input": "every 2 months on the last friday at 16:00",
          "canonical": "every 2 months on the last friday at 16:00"
        },
        {
          "name": "ordinal_second_tuesday_every_3_months",
          "input": "every 3 months on the second tuesday at 14:30",
          "canonical": "every 3 months on the second tuesday at 14:30"
        },
        {
          "name": "ordinal_first_monday_every_2_months_multi_time",
          "input": "every 2 months on the first monday at 10:00, 14:00",
          "canonical": "every 2 months on the first monday at 10:00, 14:00"
        },
        {
          "name": "ordinal_every_1_month_normalized",
          "input": "every 1 month on the first monday at 10:00",
          "canonical": "every month on the first monday at 10:00"
        }
      ]
    },
    "single_date": {
      "tests": [
        {
          "name": "named_date",
          "input": "on feb 14 at 9:00",
          "canonical": "on feb 14 at 09:00"
        },
        {
          "name": "named_date_long_month",
          "input": "on february 14 at 9:00",
          "canonical": "on feb 14 at 09:00"
        },
        {
          "name": "iso_date",
          "input": "on 2026-03-15 at 14:30",
          "canonical": "on 2026-03-15 at 14:30"
        },
        {
          "name": "dec_25",
          "input": "on dec 25 at 00:00",
          "canonical": "on dec 25 at 00:00"
        },
        {
          "name": "jan_1",
          "input": "on jan 1 at 00:00",
          "canonical": "on jan 1 at 00:00"
        },
        {
          "name": "apr_15",
          "input": "on april 15 at 09:00",
          "canonical": "on apr 15 at 09:00"
        },
        {
          "name": "aug_1",
          "input": "on august 1 at 00:00",
          "canonical": "on aug 1 at 00:00"
        },
        {
          "name": "oct_31",
          "input": "on october 31 at 17:00",
          "canonical": "on oct 31 at 17:00"
        },
        {
          "name": "multi_time_named",
          "input": "on feb 14 at 9:00, 18:00",
          "canonical": "on feb 14 at 09:00, 18:00"
        },
        {
          "name": "multi_time_iso",
          "input": "on 2026-03-15 at 9:00, 12:00, 17:00",
          "canonical": "on 2026-03-15 at 09:00, 12:00, 17:00"
        }
      ]
    },
    "year_repeat": {
      "tests": [
        {
          "name": "dec_25",
          "input": "every year on dec 25 at 00:00",
          "canonical": "every year on dec 25 at 00:00"
        },
        {
          "name": "dec_25_long_month",
          "input": "every year on december 25 at 00:00",
          "canonical": "every year on dec 25 at 00:00"
        },
        {
          "name": "jul_4",
          "input": "every year on jul 4 at 12:00",
          "canonical": "every year on jul 4 at 12:00"
        },
        {
          "name": "ordinal_first_monday_march",
          "input": "every year on the first monday of march at 10:00",
          "canonical": "every year on the first monday of mar at 10:00"
        },
        {
          "name": "ordinal_last_friday_december",
          "input": "every year on the last friday of december at 17:00",
          "canonical": "every year on the last friday of dec at 17:00"
        },
        {
          "name": "ordinal_third_thursday_november",
          "input": "every year on the third thursday of november at 12:00",
          "canonical": "every year on the third thursday of nov at 12:00"
        },
        {
          "name": "day_of_month_15th_march",
          "input": "every year on the 15th of march at 09:00",
          "canonical": "every year on the 15th of mar at 09:00"
        },
        {
          "name": "day_of_month_1st_january",
          "input": "every year on the 1st of january at 00:00",
          "canonical": "every year on the 1st of jan at 00:00"
        },
        {
          "name": "last_weekday_december",
          "input": "every year on the last weekday of december at 17:00",
          "canonical": "every year on the last weekday of dec at 17:00"
        },
        {
          "name": "last_weekday_june",
          "input": "every year on the last weekday of june at 15:00",
          "canonical": "every year on the last weekday of jun at 15:00"
        },
        {
          "name": "multi_time_dec_25",
          "input": "every year on dec 25 at 0:00, 12:00",
          "canonical": "every year on dec 25 at 00:00, 12:00"
        },
        {
          "name": "multi_time_ordinal",
          "input": "every year on the first monday of march at 10:00, 14:00",
          "canonical": "every year on the first monday of mar at 10:00, 14:00"
        },
        {
          "name": "every_2_years",
          "input": "every 2 years on dec 25 at 00:00",
          "canonical": "every 2 years on dec 25 at 00:00"
        },
        {
          "name": "every_3_years",
          "input": "every 3 years on dec 25 at 00:00",
          "canonical": "every 3 years on dec 25 at 00:00"
        },
        {
          "name": "every_4_years_leap",
          "input": "every 4 years on feb 29 at 09:00",
          "canonical": "every 4 years on feb 29 at 09:00"
        },
        {
          "name": "every_2_years_ordinal",
          "input": "every 2 years on the first monday of march at 10:00",
          "canonical": "every 2 years on the first monday of mar at 10:00"
        },
        {
          "name": "every_5_years_day_of_month",
          "input": "every 5 years on the 15th of march at 09:00",
          "canonical": "every 5 years on the 15th of mar at 09:00"
        },
        {
          "name": "every_1_year_normalized",
          "input": "every 1 year on dec 25 at 00:00",
          "canonical": "every year on dec 25 at 00:00"
        },
        {
          "name": "every_2_years_last_weekday",
          "input": "every 2 years on the last weekday of december at 17:00",
          "canonical": "every 2 years on the last weekday of dec at 17:00"
        }
      ]
    },
    "except_clause": {
      "tests": [
        {
          "name": "single_named",
          "input": "every weekday at 9:00 except dec 25",
          "canonical": "every weekday at 09:00 except dec 25"
        },
        {
          "name": "multiple_named",
          "input": "every weekday at 9:00 except dec 25, jan 1",
          "canonical": "every weekday at 09:00 except dec 25, jan 1"
        },
        {
          "name": "iso_date",
          "input": "every weekday at 9:00 except 2026-07-04",
          "canonical": "every weekday at 09:00 except 2026-07-04"
        },
        {
          "name": "mixed_named_and_iso",
          "input": "every weekday at 9:00 except dec 25, 2026-07-04, jan 1",
          "canonical": "every weekday at 09:00 except dec 25, 2026-07-04, jan 1"
        },
        {
          "name": "on_day_repeat",
          "input": "every day at 09:00 except dec 25",
          "canonical": "every day at 09:00 except dec 25"
        },
        {
          "name": "on_month_repeat",
          "input": "every month on the 1st at 09:00 except jan 1",
          "canonical": "every month on the 1st at 09:00 except jan 1"
        },
        {
          "name": "on_interval_repeat",
          "input": "every 30 min from 09:00 to 17:00 except 2026-07-04",
          "canonical": "every 30 min from 09:00 to 17:00 except 2026-07-04"
        },
        {
          "name": "on_week_repeat",
          "input": "every 2 weeks on monday at 9:00 except dec 25",
          "canonical": "every 2 weeks on monday at 09:00 except dec 25"
        },
        {
          "name": "on_ordinal_weekday",
          "input": "every month on the first monday at 10:00 except jan 1",
          "canonical": "every month on the first monday at 10:00 except jan 1"
        },
        {
          "name": "on_single_date",
          "input": "on feb 14 at 9:00 except 2026-02-14",
          "canonical": "on feb 14 at 09:00 except 2026-02-14"
        },
        {
          "name": "on_year_repeat",
          "input": "every year on dec 25 at 00:00 except 2026-12-25",
          "canonical": "every year on dec 25 at 00:00 except 2026-12-25"
        },
        {
          "name": "multi_time_with_except",
          "input": "every day at 9:00, 17:00 except dec 25",
          "canonical": "every day at 09:00, 17:00 except dec 25"
        },
        {
          "name": "day_range_with_except",
          "input": "every month on the 1st to 5th at 9:00 except jan 1",
          "canonical": "every month on the 1st to 5th at 09:00 except jan 1"
        }
      ]
    },
    "until_clause": {
      "tests": [
        {
          "name": "iso_date",
          "input": "every day at 09:00 until 2026-12-31",
          "canonical": "every day at 09:00 until 2026-12-31"
        },
        {
          "name": "named_date",
          "input": "every weekday at 09:00 until dec 31",
          "canonical": "every weekday at 09:00 until dec 31"
        },
        {
          "name": "on_interval",
          "input": "every 30 min from 09:00 to 17:00 until 2026-06-30",
          "canonical": "every 30 min from 09:00 to 17:00 until 2026-06-30"
        },
        {
          "name": "on_week_repeat",
          "input": "every 2 weeks on monday at 9:00 until 2026-12-31",
          "canonical": "every 2 weeks on monday at 09:00 until 2026-12-31"
        },
        {
          "name": "on_month_repeat",
          "input": "every month on the 1st at 09:00 until 2026-12-31",
          "canonical": "every month on the 1st at 09:00 until 2026-12-31"
        },
        {
          "name": "on_ordinal_weekday",
          "input": "every month on the first monday at 10:00 until 2026-12-31",
          "canonical": "every month on the first monday at 10:00 until 2026-12-31"
        },
        {
          "name": "on_year_repeat",
          "input": "every year on dec 25 at 00:00 until 2030-12-31",
          "canonical": "every year on dec 25 at 00:00 until 2030-12-31"
        },
        {
          "name": "multi_time_with_until",
          "input": "every day at 9:00, 17:00 until 2026-12-31",
          "canonical": "every day at 09:00, 17:00 until 2026-12-31"
        },
        {
          "name": "day_range_with_until",
          "input": "every month on the 1st to 5th at 9:00 until 2026-12-31",
          "canonical": "every month on the 1st to 5th at 09:00 until 2026-12-31"
        }
      ]
    },
    "starting_clause": {
      "tests": [
        {
          "name": "week_repeat",
          "input": "every 2 weeks on monday at 9:00 starting 2026-01-05",
          "canonical": "every 2 weeks on monday at 09:00 starting 2026-01-05"
        },
        {
          "name": "day_repeat",
          "input": "every day at 09:00 starting 2026-03-01",
          "canonical": "every day at 09:00 starting 2026-03-01"
        },
        {
          "name": "multi_time_with_starting",
          "input": "every 2 weeks on monday at 9:00, 17:00 starting 2026-01-05",
          "canonical": "every 2 weeks on monday at 09:00, 17:00 starting 2026-01-05"
        },
        {
          "name": "during_with_starting",
          "input": "every 2 weeks on monday at 9:00 starting 2026-01-05 during jan, mar",
          "canonical": "every 2 weeks on monday at 09:00 starting 2026-01-05 during jan, mar"
        },
        {
          "name": "day_interval_with_starting",
          "input": "every 3 days at 09:00 starting 2026-02-06",
          "canonical": "every 3 days at 09:00 starting 2026-02-06"
        },
        {
          "name": "month_interval_with_starting",
          "input": "every 2 months on the 1st at 09:00 starting 2026-01-01",
          "canonical": "every 2 months on the 1st at 09:00 starting 2026-01-01"
        },
        {
          "name": "year_interval_with_starting",
          "input": "every 2 years on dec 25 at 00:00 starting 2025-01-01",
          "canonical": "every 2 years on dec 25 at 00:00 starting 2025-01-01"
        },
        {
          "name": "ordinal_interval_with_starting",
          "input": "every 2 months on the first monday at 10:00 starting 2026-01-01",
          "canonical": "every 2 months on the first monday at 10:00 starting 2026-01-01"
        }
      ]
    },
    "during_clause": {
      "tests": [
        {
          "name": "single_month",
          "input": "every day at 9:00 during jan",
          "canonical": "every day at 09:00 during jan"
        },
        {
          "name": "two_months",
          "input": "every weekday at 9:00 during jan, jun",
          "canonical": "every weekday at 09:00 during jan, jun"
        },
        {
          "name": "five_months",
          "input": "every day at 9:00 during jan, mar, jun, sep, dec",
          "canonical": "every day at 09:00 during jan, mar, jun, sep, dec"
        },
        {
          "name": "long_month_name",
          "input": "every day at 9:00 during january",
          "canonical": "every day at 09:00 during jan"
        },
        {
          "name": "long_month_names_multiple",
          "input": "every day at 9:00 during january, february, march",
          "canonical": "every day at 09:00 during jan, feb, mar"
        },
        {
          "name": "on_interval",
          "input": "every 30 min from 9:00 to 17:00 during jan",
          "canonical": "every 30 min from 09:00 to 17:00 during jan"
        },
        {
          "name": "on_month_repeat",
          "input": "every month on the 1st at 9:00 during jan, jul",
          "canonical": "every month on the 1st at 09:00 during jan, jul"
        },
        {
          "name": "on_ordinal_weekday",
          "input": "every month on the first monday at 10:00 during mar",
          "canonical": "every month on the first monday at 10:00 during mar"
        },
        {
          "name": "on_week_repeat",
          "input": "every 2 weeks on monday at 9:00 during jan",
          "canonical": "every 2 weeks on monday at 09:00 during jan"
        },
        {
          "name": "on_year_repeat",
          "input": "every year on dec 25 at 0:00 during dec",
          "canonical": "every year on dec 25 at 00:00 during dec"
        },
        {
          "name": "multi_time_with_during",
          "input": "every day at 9:00, 17:00 during jan, jun",
          "canonical": "every day at 09:00, 17:00 during jan, jun"
        },
        {
          "name": "day_range_with_during",
          "input": "every month on the 1st to 5th at 9:00 during jan, jul",
          "canonical": "every month on the 1st to 5th at 09:00 during jan, jul"
        }
      ]
    },
    "timezone_clause": {
      "tests": [
        {
          "name": "america_vancouver",
          "input": "every weekday at 9:00 in America/Vancouver",
          "canonical": "every weekday at 09:00 in America/Vancouver"
        },
        {
          "name": "utc",
          "input": "every day at 09:00 in UTC",
          "canonical": "every day at 09:00 in UTC"
        },
        {
          "name": "europe_london",
          "input": "on 2026-03-15 at 14:30 in Europe/London",
          "canonical": "on 2026-03-15 at 14:30 in Europe/London"
        },
        {
          "name": "europe_berlin",
          "input": "every 30 min from 09:00 to 17:00 in Europe/Berlin",
          "canonical": "every 30 min from 09:00 to 17:00 in Europe/Berlin"
        },
        {
          "name": "asia_tokyo",
          "input": "every 2 weeks on monday at 9:00 in Asia/Tokyo",
          "canonical": "every 2 weeks on monday at 09:00 in Asia/Tokyo"
        },
        {
          "name": "america_chicago",
          "input": "every month on the 1st at 9:00 in America/Chicago",
          "canonical": "every month on the 1st at 09:00 in America/Chicago"
        },
        {
          "name": "australia_sydney",
          "input": "every month on the first monday at 10:00 in Australia/Sydney",
          "canonical": "every month on the first monday at 10:00 in Australia/Sydney"
        },
        {
          "name": "america_new_york",
          "input": "every year on dec 25 at 00:00 in America/New_York",
          "canonical": "every year on dec 25 at 00:00 in America/New_York"
        }
      ]
    },
    "combined_clauses": {
      "tests": [
        {
          "name": "except_and_timezone",
          "input": "every weekday at 9:00 except dec 25 in UTC",
          "canonical": "every weekday at 09:00 except dec 25 in UTC"
        },
        {
          "name": "except_and_until",
          "input": "every weekday at 9:00 except dec 25 until 2027-12-31",
          "canonical": "every weekday at 09:00 except dec 25 until 2027-12-31"
        },
        {
          "name": "until_and_timezone",
          "input": "every day at 09:00 until 2026-12-31 in UTC",
          "canonical": "every day at 09:00 until 2026-12-31 in UTC"
        },
        {
          "name": "all_clauses",
          "input": "every weekday at 9:00 except dec 25 until 2027-12-31 starting 2026-01-01 in UTC",
          "canonical": "every weekday at 09:00 except dec 25 until 2027-12-31 starting 2026-01-01 in UTC"
        },
        {
          "name": "all_clauses_multi_except",
          "input": "every weekday at 9:00 except dec 25, jan 1 until 2027-12-31 starting 2026-01-01 in America/New_York",
          "canonical": "every weekday at 09:00 except dec 25, jan 1 until 2027-12-31 starting 2026-01-01 in America/New_York"
        },
        {
          "name": "starting_and_timezone",
          "input": "every 2 weeks on monday at 9:00 starting 2026-01-05 in UTC",
          "canonical": "every 2 weeks on monday at 09:00 starting 2026-01-05 in UTC"
        },
        {
          "name": "multi_time_except_timezone",
          "input": "every day at 9:00, 17:00 except dec 25 in UTC",
          "canonical": "every day at 09:00, 17:00 except dec 25 in UTC"
        },
        {
          "name": "during_and_timezone",
          "input": "every day at 9:00 during feb in UTC",
          "canonical": "every day at 09:00 during feb in UTC"
        },
        {
          "name": "except_during_timezone",
          "input": "every weekday at 9:00 except dec 25 during jan, dec in UTC",
          "canonical": "every weekday at 09:00 except dec 25 during jan, dec in UTC"
        },
        {
          "name": "until_during_timezone",
          "input": "every day at 9:00 until 2027-12-31 during jan, jun in UTC",
          "canonical": "every day at 09:00 until 2027-12-31 during jan, jun in UTC"
        },
        {
          "name": "multi_time_during_timezone",
          "input": "every day at 9:00, 17:00 during jan, jun in UTC",
          "canonical": "every day at 09:00, 17:00 during jan, jun in UTC"
        },
        {
          "name": "day_range_during_timezone",
          "input": "every month on the 1st to 5th at 9:00 during jan in UTC",
          "canonical": "every month on the 1st to 5th at 09:00 during jan in UTC"
        },
        {
          "name": "day_range_multi_time_during_timezone",
          "input": "every month on the 1st to 5th at 9:00, 17:00 during jan in UTC",
          "canonical": "every month on the 1st to 5th at 09:00, 17:00 during jan in UTC"
        },
        {
          "name": "all_clauses_with_during",
          "input": "every weekday at 9:00 except dec 25 until 2027-12-31 starting 2026-01-01 during jan, dec in America/New_York",
          "canonical": "every weekday at 09:00 except dec 25 until 2027-12-31 starting 2026-01-01 during jan, dec in America/New_York"
        },
        {
          "name": "multi_time_all_clauses_with_during",
          "input": "every weekday at 9:00, 17:00 except dec 25 until 2027-12-31 starting 2026-01-01 during jan, dec in UTC",
          "canonical": "every weekday at 09:00, 17:00 except dec 25 until 2027-12-31 starting 2026-01-01 during jan, dec in UTC"
        },
        {
          "name": "day_range_all_clauses",
          "input": "every month on the 1st to 15th at 9:00 except jan 1 until 2027-12-31 during jan, jul in UTC",
          "canonical": "every month on the 1st to 15th at 09:00 except jan 1 until 2027-12-31 during jan, jul in UTC"
        },
        {
          "name": "day_range_multi_time_all_clauses",
          "input": "every month on the 1st to 15th at 9:00, 17:00 except jan 1 until 2027-12-31 during jan, jul in UTC",
          "canonical": "every month on the 1st to 15th at 09:00, 17:00 except jan 1 until 2027-12-31 during jan, jul in UTC"
        }
      ]
    },
    "case_insensitivity": {
      "tests": [
        {
          "name": "mixed_case_keywords",
          "input": "Every Weekday At 9:00",
          "canonical": "every weekday at 09:00"
        },
        {
          "name": "upper_case_month",
          "input": "on DEC 25 at 00:00",
          "canonical": "on dec 25 at 00:00"
        },
        {
          "name": "upper_case_day",
          "input": "every MONDAY at 9:00",
          "canonical": "every monday at 09:00"
        },
        {
          "name": "mixed_case_multi_time",
          "input": "Every Day At 9:00, 17:00",
          "canonical": "every day at 09:00, 17:00"
        },
        {
          "name": "mixed_case_during",
          "input": "Every Day At 9:00 During JAN",
          "canonical": "every day at 09:00 during jan"
        }
      ]
    },
    "ordinal_in_dates": {
      "tests": [
        {
          "name": "ordinal_in_exception",
          "input": "every day at 09:00 except dec 25th",
          "canonical": "every day at 09:00 except dec 25"
        },
        {
          "name": "ordinal_in_until",
          "input": "every day at 09:00 until dec 31st",
          "canonical": "every day at 09:00 until dec 31"
        },
        {
          "name": "ordinal_in_single_date",
          "input": "on feb 14th at 09:00",
          "canonical": "on feb 14 at 09:00"
        },
        {
          "name": "ordinal_in_year_target",
          "input": "every year on dec 25th at 00:00",
          "canonical": "every year on dec 25 at 00:00"
        }
      ]
    }
  },
  "parse_errors": {
    "description": "Inputs that must fail to parse.",
    "tests": [
      {
        "name": "empty_input",
        "input": "",
        "description": "empty input"
      },
      {
        "name": "gibberish",
        "input": "hello",
        "description": "gibberish"
      },
      {
        "name": "incomplete_every",
        "input": "every",
        "description": "incomplete expression"
      },
      {
        "name": "missing_time",
        "input": "every day",
        "description": "missing time"
      },
      {
        "name": "invalid_hour",
        "input": "every day at 25:00",
        "description": "invalid hour"
      },
      {
        "name": "invalid_minute",
        "input": "every day at 09:60",
        "description": "invalid minute"
      },
      {
        "name": "unknown_keyword",
        "input": "every blorp at 09:00",
        "description": "unknown keyword"
      },
      {
        "name": "incomplete_except",
        "input": "every day at 09:00 except",
        "description": "incomplete except clause"
      },
      {
        "name": "incomplete_until",
        "input": "every day at 09:00 until",
        "description": "incomplete until clause"
      },
      {
        "name": "incomplete_starting",
        "input": "every day at 09:00 starting",
        "description": "incomplete starting clause"
      },
      {
        "name": "incomplete_timezone",
        "input": "every day at 09:00 in",
        "description": "incomplete timezone clause"
      },
      {
        "name": "in_before_except",
        "input": "every day at 09:00 in UTC except dec 25",
        "description": "wrong clause order: in before except"
      },
      {
        "name": "until_before_except",
        "input": "every day at 09:00 until 2026-12-31 except dec 25",
        "description": "wrong clause order: until before except"
      },
      {
        "name": "in_before_until",
        "input": "every day at 09:00 in UTC until 2026-12-31",
        "description": "wrong clause order: in before until"
      },
      {
        "name": "incomplete_during",
        "input": "every day at 09:00 during",
        "description": "incomplete during clause"
      },
      {
        "name": "during_before_except",
        "input": "every day at 09:00 during jan except dec 25",
        "description": "wrong clause order: during before except"
      },
      {
        "name": "during_before_until",
        "input": "every day at 09:00 during jan until 2027-12-31",
        "description": "wrong clause order: during before until"
      },
      {
        "name": "in_before_during",
        "input": "every day at 09:00 in UTC during jan",
        "description": "wrong clause order: in before during"
      },
      {
        "name": "zero_day_interval",
        "input": "every 0 days at 09:00",
        "description": "zero interval"
      },
      {
        "name": "zero_minute_interval",
        "input": "every 0 min from 09:00 to 17:00",
        "description": "zero interval"
      },
      {
        "name": "zero_month_interval",
        "input": "every 0 months on the 1st at 09:00",
        "description": "zero interval"
      },
      {
        "name": "zero_year_interval",
        "input": "every 0 years on dec 25 at 00:00",
        "description": "zero interval"
      },
      {
        "name": "zero_week_interval",
        "input": "every 0 weeks on monday at 09:00",
        "description": "zero interval"
      },
      {
        "name": "zero_ordinal_interval",
        "input": "every 0 months on the first monday at 10:00",
        "description": "zero interval"
      },
      {
        "name": "starting_named_date",
        "input": "every day at 09:00 starting dec 25",
        "description": "starting only accepts ISO dates"
      },
      {
        "name": "invalid_iso_date_feb_30",
        "input": "every day at 09:00 except 2026-02-30",
        "description": "February 30 does not exist"
      },
      {
        "name": "invalid_iso_date_month_13",
        "input": "every day at 09:00 except 2026-13-01",
        "description": "month 13 does not exist"
      },
      {
        "name": "invalid_iso_date_day_00",
        "input": "every day at 09:00 except 2026-01-00",
        "description": "day 0 does not exist"
      },
      {
        "name": "invalid_iso_date_apr_31",
        "input": "every day at 09:00 except 2026-04-31",
        "description": "April has 30 days"
      },
      {
        "name": "invalid_iso_date_feb_29_non_leap",
        "input": "every day at 09:00 except 2026-02-29",
        "description": "2026 is not a leap year"
      },
      {
        "name": "invalid_iso_date_single_date",
        "input": "on 2026-02-30 at 09:00",
        "description": "invalid date in single date expression"
      },
      {
        "name": "invalid_iso_date_until",
        "input": "every day at 09:00 until 2026-04-31",
        "description": "invalid date in until clause"
      },
      {
        "name": "invalid_iso_date_starting",
        "input": "every day at 09:00 starting 2026-06-31",
        "description": "invalid date in starting clause"
      },
      {
        "name": "named_date_feb_31",
        "input": "every day at 09:00 except feb 31",
        "error_contains": "invalid"
      },
      {
        "name": "named_date_apr_0",
        "input": "every day at 09:00 except apr 0",
        "error_contains": "invalid"
      },
      {
        "name": "named_date_jun_31",
        "input": "every day at 09:00 until jun 31",
        "error_contains": "invalid"
      },
      {
        "name": "named_date_feb_30",
        "input": "on feb 30 at 09:00",
        "error_contains": "invalid"
      },
      {
        "name": "named_date_apr_31",
        "input": "every year on apr 31 at 09:00",
        "error_contains": "invalid"
      },
      {
        "name": "day_range_inverted",
        "input": "every month on the 15th to 1st at 09:00",
        "error_contains": "invalid"
      },
      {
        "name": "day_range_day_0",
        "input": "every month on the 0th at 09:00",
        "error_contains": "invalid"
      },
      {
        "name": "day_range_day_32",
        "input": "every month on the 32nd at 09:00",
        "error_contains": "invalid"
      }
    ]
  },
  "eval": {
    "description": "Evaluation tests. Each test specifies an expression, an optional 'now' override (defaults to top-level now), and the expected next occurrence(s). Dates use ISO 8601 format.",
    "day_repeat": {
      "tests": [
        {
          "name": "time_already_passed",
          "expression": "every day at 09:00 in UTC",
          "description": "time already passed today, next is tomorrow",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "time_not_passed",
          "expression": "every day at 15:00 in UTC",
          "description": "time hasn't passed today",
          "next": "2026-02-06T15:00:00+00:00[UTC]"
        },
        {
          "name": "weekday_from_friday",
          "expression": "every weekday at 9:00 in UTC",
          "description": "Friday 09:00 passed, next weekday is Monday",
          "next_date": "2026-02-09"
        },
        {
          "name": "weekend_from_friday",
          "expression": "every weekend at 10:00 in UTC",
          "description": "next weekend day is Saturday",
          "next_date": "2026-02-07"
        },
        {
          "name": "monday",
          "expression": "every monday at 9:00 in UTC",
          "next_date": "2026-02-09"
        },
        {
          "name": "multi_day_from_friday",
          "expression": "every mon, wed, fri at 9:00 in UTC",
          "description": "Friday 09:00 passed, next is Monday",
          "next_date": "2026-02-09"
        },
        {
          "name": "friday_future_time",
          "expression": "every friday at 15:00 in UTC",
          "description": "today is Friday, 15:00 hasn't passed",
          "next_date": "2026-02-06"
        },
        {
          "name": "saturday_from_friday",
          "expression": "every saturday at 10:00 in UTC",
          "next_date": "2026-02-07"
        },
        {
          "name": "exact_time_boundary",
          "expression": "every day at 12:00 in UTC",
          "description": "now is exactly 12:00 UTC; strict greater-than means this is treated as passed, next is tomorrow",
          "next": "2026-02-07T12:00:00+00:00[UTC]"
        },
        {
          "name": "every_3_days",
          "expression": "every 3 days at 09:00 in UTC",
          "description": "anchor epoch, Feb 6 aligned (20490%3=0), 09:00 passed, next aligned = Feb 9",
          "next": "2026-02-09T09:00:00+00:00[UTC]"
        },
        {
          "name": "every_3_days_n_occurrences",
          "expression": "every 3 days at 09:00 in UTC",
          "description": "5 occurrences every 3 days",
          "next_n": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-15T09:00:00+00:00[UTC]",
            "2026-02-18T09:00:00+00:00[UTC]",
            "2026-02-21T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_2_days_with_starting",
          "expression": "every 2 days at 09:00 starting 2026-02-06 in UTC",
          "description": "anchor Feb 6, fires on even offsets from anchor",
          "next_n": [
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-14T09:00:00+00:00[UTC]",
            "2026-02-16T09:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "interval_repeat": {
      "tests": [
        {
          "name": "45min_mid_window",
          "expression": "every 45 min from 09:00 to 17:00 in UTC",
          "description": "now 12:00, next = 12:45",
          "next": "2026-02-06T12:45:00+00:00[UTC]"
        },
        {
          "name": "30min_full_day",
          "expression": "every 30 min from 00:00 to 23:59 in UTC",
          "next": "2026-02-06T12:30:00+00:00[UTC]"
        },
        {
          "name": "2_hours_full_day",
          "expression": "every 2 hours from 00:00 to 23:59 in UTC",
          "description": "steps: 0,2,4,6,8,10,12,14... next > 12:00 is 14:00",
          "next": "2026-02-06T14:00:00+00:00[UTC]"
        },
        {
          "name": "on_weekdays",
          "expression": "every 45 min from 09:00 to 17:00 on weekdays in UTC",
          "description": "Friday, within window",
          "next": "2026-02-06T12:45:00+00:00[UTC]"
        },
        {
          "name": "15min_mid_window",
          "expression": "every 15 min from 09:00 to 17:00 in UTC",
          "next": "2026-02-06T12:15:00+00:00[UTC]"
        },
        {
          "name": "window_ended_today",
          "expression": "every 30 min from 09:00 to 12:00 in UTC",
          "description": "window ended for today, next = tomorrow",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "weekend_filter",
          "expression": "every 30 min from 09:00 to 17:00 on weekend in UTC",
          "description": "today is Friday, weekend filter pushes to Saturday",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "window_start_before",
          "expression": "every 30 min from 09:00 to 17:00 in UTC",
          "description": "just before window start, first occurrence is 09:00",
          "now": "2026-02-06T08:59:59+00:00[UTC]",
          "next": "2026-02-06T09:00:00+00:00[UTC]"
        },
        {
          "name": "window_start_exact",
          "expression": "every 30 min from 09:00 to 17:00 in UTC",
          "description": "exactly at window start 09:00; strict greater-than skips to 09:30",
          "now": "2026-02-06T09:00:00+00:00[UTC]",
          "next": "2026-02-06T09:30:00+00:00[UTC]"
        },
        {
          "name": "window_end_boundary",
          "expression": "every 30 min from 09:00 to 17:00 in UTC",
          "description": "near window end, 17:00 is last valid occurrence",
          "now": "2026-02-06T16:59:00+00:00[UTC]",
          "next": "2026-02-06T17:00:00+00:00[UTC]"
        }
      ]
    },
    "month_repeat": {
      "tests": [
        {
          "name": "1st_passed",
          "expression": "every month on the 1st at 9:00 in UTC",
          "description": "Feb 1 passed, next = Mar 1",
          "next_date": "2026-03-01"
        },
        {
          "name": "15th_upcoming",
          "expression": "every month on the 15th at 9:00 in UTC",
          "next_date": "2026-02-15"
        },
        {
          "name": "multi_day_1st_15th",
          "expression": "every month on the 1st, 15th at 9:00 in UTC",
          "next_date": "2026-02-15"
        },
        {
          "name": "last_day_february",
          "expression": "every month on the last day at 17:00 in UTC",
          "description": "last day of Feb 2026 = Feb 28",
          "next_date": "2026-02-28"
        },
        {
          "name": "last_weekday_february",
          "expression": "every month on the last weekday at 15:00 in UTC",
          "description": "Feb 28 is Saturday, last weekday = Friday Feb 27",
          "next_date": "2026-02-27"
        },
        {
          "name": "skip_31st_february",
          "expression": "every month on the 31st at 09:00 in UTC",
          "description": "Feb has no 31st, skip to March 31",
          "next_date": "2026-03-31"
        },
        {
          "name": "skip_30th_february",
          "expression": "every month on the 30th at 09:00 in UTC",
          "description": "Feb has no 30th, skip to March 30",
          "next_date": "2026-03-30"
        },
        {
          "name": "every_2_months",
          "expression": "every 2 months on the 1st at 09:00 in UTC",
          "description": "epoch anchor, Feb (month 673) odd = skip, Mar (674) even = aligned",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-05-01T09:00:00+00:00[UTC]",
            "2026-07-01T09:00:00+00:00[UTC]",
            "2026-09-01T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_3_months",
          "expression": "every 3 months on the 15th at 09:00 in UTC",
          "description": "epoch anchor, Apr (month 675) %3=0, Jul (678), Oct (681)",
          "next_n": [
            "2026-04-15T09:00:00+00:00[UTC]",
            "2026-07-15T09:00:00+00:00[UTC]",
            "2026-10-15T09:00:00+00:00[UTC]",
            "2027-01-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_2_months_with_starting",
          "expression": "every 2 months on the 1st at 09:00 starting 2026-01-01 in UTC",
          "description": "anchor Jan, offset: Mar=2 (%2=0), May=4 (%2=0), etc.",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-05-01T09:00:00+00:00[UTC]",
            "2026-07-01T09:00:00+00:00[UTC]",
            "2026-09-01T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_2_months_with_except",
          "expression": "every 2 months on the 15th at 09:00 except 2026-06-15 in UTC",
          "description": "bimonthly + except: Jun 15 is non-aligned (epoch), so exception has no effect on aligned months",
          "next_n": [
            "2026-03-15T09:00:00+00:00[UTC]",
            "2026-05-15T09:00:00+00:00[UTC]",
            "2026-07-15T09:00:00+00:00[UTC]",
            "2026-09-15T09:00:00+00:00[UTC]",
            "2026-11-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_6_months_with_except",
          "expression": "every 6 months on the 15th at 09:00 except 2026-07-15 starting 2026-01-01 in UTC",
          "description": "semiannual + except: skip Jul 15, next aligned is Jan 15 2027",
          "next_n_count": 4,
          "next_n": [
            "2027-01-15T09:00:00+00:00[UTC]",
            "2027-07-15T09:00:00+00:00[UTC]",
            "2028-01-15T09:00:00+00:00[UTC]",
            "2028-07-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "nearest_weekday_on_weekday",
          "expression": "every month on the nearest weekday to 13th at 09:00 in UTC",
          "description": "Feb 13, 2026 is Friday, fires as-is",
          "next_date": "2026-02-13"
        },
        {
          "name": "nearest_weekday_saturday_to_friday",
          "expression": "every month on the nearest weekday to 14th at 09:00 in UTC",
          "description": "Feb 14, 2026 is Saturday, nearest weekday is Friday 13th",
          "next_date": "2026-02-13"
        },
        {
          "name": "nearest_weekday_sunday_to_monday",
          "expression": "every month on the nearest weekday to 15th at 09:00 in UTC",
          "description": "Feb 15, 2026 is Sunday, nearest weekday is Monday 16th",
          "next_date": "2026-02-16"
        },
        {
          "name": "nearest_weekday_1st_sunday",
          "expression": "every month on the nearest weekday to 1st at 09:00 in UTC",
          "description": "Feb 1 is Sunday (past), Mar 1 is Sunday, fires Monday Mar 2",
          "next_date": "2026-03-02"
        },
        {
          "name": "nearest_weekday_1st_saturday_boundary",
          "expression": "every month on the nearest weekday to 1st at 09:00 during aug in UTC",
          "description": "Aug 1, 2026 is Saturday, can't go prev month, fires Monday Aug 3",
          "next_date": "2026-08-03"
        },
        {
          "name": "nearest_weekday_31st",
          "expression": "every month on the nearest weekday to 31st at 09:00 in UTC",
          "description": "Mar 31, 2026 is Tuesday, fires as-is",
          "next_date": "2026-03-31"
        },
        {
          "name": "nearest_weekday_31st_sunday_boundary",
          "expression": "every month on the nearest weekday to 31st at 09:00 during may in UTC",
          "description": "May 31, 2026 is Sunday, can't go next month, fires Friday May 29",
          "next_date": "2026-05-29"
        },
        {
          "name": "nearest_weekday_31st_saturday",
          "expression": "every month on the nearest weekday to 31st at 09:00 during oct in UTC",
          "description": "Oct 31, 2026 is Saturday, fires Friday Oct 30",
          "next_date": "2026-10-30"
        },
        {
          "name": "next_nearest_saturday_to_monday",
          "expression": "every month on the next nearest weekday to 14th at 09:00 in UTC",
          "description": "Feb 14, 2026 is Saturday, next nearest is Monday 16th",
          "next_date": "2026-02-16"
        },
        {
          "name": "next_nearest_sunday_to_monday",
          "expression": "every month on the next nearest weekday to 15th at 09:00 in UTC",
          "description": "Feb 15, 2026 is Sunday, next nearest is Monday 16th",
          "next_date": "2026-02-16"
        },
        {
          "name": "next_nearest_31st_crosses_month",
          "expression": "every month on the next nearest weekday to 31st at 09:00 during may in UTC",
          "description": "May 31, 2026 is Sunday, next nearest crosses to Monday Jun 1",
          "next_date": "2026-06-01"
        },
        {
          "name": "previous_nearest_sunday_to_friday",
          "expression": "every month on the previous nearest weekday to 15th at 09:00 in UTC",
          "description": "Feb 15, 2026 is Sunday, previous nearest is Friday 13th",
          "next_date": "2026-02-13"
        },
        {
          "name": "previous_nearest_saturday_to_friday",
          "expression": "every month on the previous nearest weekday to 14th at 09:00 in UTC",
          "description": "Feb 14, 2026 is Saturday, previous nearest is Friday 13th",
          "next_date": "2026-02-13"
        },
        {
          "name": "previous_nearest_1st_crosses_month",
          "expression": "every month on the previous nearest weekday to 1st at 09:00 during mar in UTC",
          "description": "Mar 1, 2026 is Sunday, previous nearest crosses to Friday Feb 27",
          "next_date": "2026-02-27"
        },
        {
          "name": "ordinal_first_monday",
          "expression": "every month on the first monday at 10:00 in UTC",
          "description": "Feb first Monday (Feb 2) passed, next = Mar 2",
          "next_date": "2026-03-02"
        },
        {
          "name": "ordinal_last_friday",
          "expression": "every month on the last friday at 16:00 in UTC",
          "next_date": "2026-02-27"
        },
        {
          "name": "ordinal_second_tuesday",
          "expression": "every month on the second tuesday at 14:30 in UTC",
          "next_date": "2026-02-10"
        },
        {
          "name": "ordinal_third_wednesday",
          "expression": "every month on the third wednesday at 09:00 in UTC",
          "next_date": "2026-02-18"
        },
        {
          "name": "ordinal_fourth_thursday",
          "expression": "every month on the fourth thursday at 11:00 in UTC",
          "next_date": "2026-02-26"
        },
        {
          "name": "ordinal_fifth_friday_skips_months",
          "expression": "every month on the fifth friday at 16:00 in UTC",
          "description": "Feb/Mar/Apr have no 5th Friday, May 29 does",
          "next_date": "2026-05-29"
        },
        {
          "name": "ordinal_first_monday_every_2_months",
          "expression": "every 2 months on the first monday at 10:00 in UTC",
          "description": "epoch anchor, aligned months: Mar (674), May (676), Jul (678), Sep (680)",
          "next_n": [
            "2026-03-02T10:00:00+00:00[UTC]",
            "2026-05-04T10:00:00+00:00[UTC]",
            "2026-07-06T10:00:00+00:00[UTC]",
            "2026-09-07T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_first_monday_every_3_months",
          "expression": "every 3 months on the first monday at 10:00 in UTC",
          "description": "epoch anchor, aligned months: Apr (675), Jul (678), Oct (681), Jan 2027 (684)",
          "next_n": [
            "2026-04-06T10:00:00+00:00[UTC]",
            "2026-07-06T10:00:00+00:00[UTC]",
            "2026-10-05T10:00:00+00:00[UTC]",
            "2027-01-04T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_last_friday_every_2_months",
          "expression": "every 2 months on the last friday at 16:00 in UTC",
          "description": "epoch anchor, aligned months: Mar, May, Jul, Sep",
          "next_n": [
            "2026-03-27T16:00:00+00:00[UTC]",
            "2026-05-29T16:00:00+00:00[UTC]",
            "2026-07-31T16:00:00+00:00[UTC]",
            "2026-09-25T16:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_first_monday_every_2_months_with_starting",
          "expression": "every 2 months on the first monday at 10:00 starting 2026-01-01 in UTC",
          "description": "anchor Jan 2026, aligned months: Jan(0), Mar(2), May(4), Jul(6). Now is Feb so first is Mar",
          "next_n": [
            "2026-03-02T10:00:00+00:00[UTC]",
            "2026-05-04T10:00:00+00:00[UTC]",
            "2026-07-06T10:00:00+00:00[UTC]",
            "2026-09-07T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_interval_with_except",
          "expression": "every 2 months on the first monday at 10:00 except 2026-05-04 starting 2026-01-01 in UTC",
          "description": "bimonthly ordinal + except: skip May 4, next aligned is Jul 6",
          "next_n_count": 4,
          "next_n": [
            "2026-03-02T10:00:00+00:00[UTC]",
            "2026-07-06T10:00:00+00:00[UTC]",
            "2026-09-07T10:00:00+00:00[UTC]",
            "2026-11-02T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_interval_with_until",
          "expression": "every 2 months on the first monday at 10:00 until 2026-09-01 starting 2026-01-01 in UTC",
          "description": "bimonthly ordinal + until: fires Mar, May, Jul only (Sep 7 > Sep 1)",
          "next_n_count": 10,
          "next_n": [
            "2026-03-02T10:00:00+00:00[UTC]",
            "2026-05-04T10:00:00+00:00[UTC]",
            "2026-07-06T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_last_friday_quarterly",
          "expression": "every 3 months on the last friday at 17:00 starting 2026-01-01 in UTC",
          "description": "quarterly last friday: Apr, Jul, Oct, Jan",
          "next_n_count": 4,
          "next_n": [
            "2026-04-24T17:00:00+00:00[UTC]",
            "2026-07-31T17:00:00+00:00[UTC]",
            "2026-10-30T17:00:00+00:00[UTC]",
            "2027-01-29T17:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "week_repeat": {
      "tests": [
        {
          "name": "biweekly_with_anchor",
          "expression": "every 2 weeks on monday at 9:00 starting 2026-02-02 in UTC",
          "description": "anchor Feb 2, next after Feb 6 = Feb 16",
          "next_n": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "triweekly",
          "expression": "every 3 weeks on friday at 15:00 starting 2026-01-02 in UTC",
          "description": "3-week cycle: Jan 2 anchor, next Fridays: Jan 23, Feb 13, Mar 6",
          "next_date": "2026-02-13"
        },
        {
          "name": "biweekly_multi_day",
          "expression": "every 2 weeks on mon, wed at 10:00 starting 2026-02-02 in UTC",
          "description": "multi-day within biweekly cycle",
          "next_n": [
            "2026-02-16T10:00:00+00:00[UTC]",
            "2026-02-18T10:00:00+00:00[UTC]",
            "2026-03-02T10:00:00+00:00[UTC]",
            "2026-03-04T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "biweekly_no_anchor",
          "expression": "every 2 weeks on monday at 9:00 in UTC",
          "description": "no starting clause: default anchor is epoch Monday (1970-01-05). Week parity from epoch determines which Mondays fire.",
          "next_n": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]",
            "2026-03-30T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "biweekly_with_except",
          "expression": "every 2 weeks on monday at 09:00 except 2026-03-02 starting 2026-01-05 in UTC",
          "description": "biweekly + exception: skip Mar 2, next aligned Monday is Mar 16",
          "next_n_count": 4,
          "next_n": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]",
            "2026-03-30T09:00:00+00:00[UTC]",
            "2026-04-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "biweekly_with_until",
          "expression": "every 2 weeks on monday at 09:00 until 2026-04-01 starting 2026-01-05 in UTC",
          "description": "biweekly + until: fires Feb 16, Mar 2, Mar 16, Mar 30",
          "next_n_count": 10,
          "next_n": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]",
            "2026-03-30T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "biweekly_with_timezone_dst",
          "expression": "every 2 weeks on monday at 09:00 in America/New_York",
          "description": "biweekly spanning DST spring-forward: offset changes from EST to EDT",
          "now": "2026-02-06T12:00:00-05:00[America/New_York]",
          "next_n_count": 4,
          "next_n": [
            "2026-02-16T09:00:00-05:00[America/New_York]",
            "2026-03-02T09:00:00-05:00[America/New_York]",
            "2026-03-16T09:00:00-04:00[America/New_York]",
            "2026-03-30T09:00:00-04:00[America/New_York]"
          ]
        },
        {
          "name": "triweekly_with_starting",
          "expression": "every 3 weeks on friday at 17:00 starting 2026-01-02 in UTC",
          "description": "3-week cycle anchored Jan 2: aligned Fridays every 21 days",
          "next_n": [
            "2026-02-13T17:00:00+00:00[UTC]",
            "2026-03-06T17:00:00+00:00[UTC]",
            "2026-03-27T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "biweekly_matches_aligned",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-01-05 in UTC",
          "datetime": "2026-02-16T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "Feb 16 is an aligned biweekly Monday"
        },
        {
          "name": "biweekly_matches_not_aligned",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-01-05 in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "Feb 9 is a Monday but not aligned to the biweekly cycle"
        }
      ]
    },
    "single_date": {
      "tests": [
        {
          "name": "iso_date_future",
          "expression": "on 2026-03-15 at 14:30 in UTC",
          "next": "2026-03-15T14:30:00+00:00[UTC]"
        },
        {
          "name": "iso_date_past",
          "expression": "on 2020-01-01 at 00:00 in UTC",
          "description": "past date returns no result",
          "next": null
        },
        {
          "name": "named_date_upcoming",
          "expression": "on feb 14 at 9:00 in UTC",
          "next_date": "2026-02-14"
        },
        {
          "name": "named_date_passed_this_year",
          "expression": "on jan 1 at 9:00 in UTC",
          "description": "Jan 1 passed this year, next = next year",
          "next_date": "2027-01-01"
        },
        {
          "name": "iso_date_year_end",
          "expression": "on 2026-12-31 at 23:59 in UTC",
          "description": "ISO date at the very end of the year",
          "next": "2026-12-31T23:59:00+00:00[UTC]"
        },
        {
          "name": "iso_date_already_passed",
          "expression": "on 2026-01-01 at 00:00 in UTC",
          "description": "ISO date in the past (now is Feb 6) returns null",
          "next": null
        },
        {
          "name": "iso_date_past_returns_null",
          "expression": "on 2026-12-31 at 23:59 in UTC",
          "description": "past ISO date returns null",
          "now": "2027-01-01T00:00:00+00:00[UTC]",
          "next": null
        },
        {
          "name": "iso_date_multi_time",
          "expression": "on 2026-03-15 at 09:00, 17:00 in UTC",
          "description": "single ISO date with two fire times",
          "next_n_count": 3,
          "next_n": [
            "2026-03-15T09:00:00+00:00[UTC]",
            "2026-03-15T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "named_date_with_except",
          "expression": "on mar 15 at 09:00 except 2026-03-15 in UTC",
          "description": "named recurring date + ISO exception: skips 2026, fires 2027",
          "next": "2027-03-15T09:00:00+00:00[UTC]"
        },
        {
          "name": "named_date_with_until",
          "expression": "on mar 15 at 09:00 until 2027-06-01 in UTC",
          "description": "named date limited by until: fires 2026 and 2027 only",
          "next_n_count": 5,
          "next_n": [
            "2026-03-15T09:00:00+00:00[UTC]",
            "2027-03-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "iso_date_matches_true",
          "expression": "on 2026-03-15 at 09:00 in UTC",
          "datetime": "2026-03-15T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "exact match on ISO date and time"
        },
        {
          "name": "iso_date_matches_wrong_date",
          "expression": "on 2026-03-15 at 09:00 in UTC",
          "datetime": "2026-03-14T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "wrong date does not match"
        },
        {
          "name": "iso_date_matches_wrong_time",
          "expression": "on 2026-03-15 at 09:00 in UTC",
          "datetime": "2026-03-15T17:00:00+00:00[UTC]",
          "expected": false,
          "description": "right date but wrong time does not match"
        },
        {
          "name": "named_date_with_timezone",
          "expression": "on mar 15 at 09:00 in America/New_York",
          "description": "named date in specific timezone (EDT in March)",
          "now": "2026-02-06T12:00:00-05:00[America/New_York]",
          "next_n": [
            "2026-03-15T09:00:00-04:00[America/New_York]",
            "2027-03-15T09:00:00-04:00[America/New_York]",
            "2028-03-15T09:00:00-04:00[America/New_York]"
          ]
        }
      ]
    },
    "year_repeat": {
      "tests": [
        {
          "name": "dec_25",
          "expression": "every year on dec 25 at 00:00 in UTC",
          "next_date": "2026-12-25"
        },
        {
          "name": "jul_4",
          "expression": "every year on jul 4 at 12:00 in UTC",
          "next_date": "2026-07-04"
        },
        {
          "name": "jan_1_passed",
          "expression": "every year on jan 1 at 00:00 in UTC",
          "description": "Jan 1 passed, next year",
          "next_date": "2027-01-01"
        },
        {
          "name": "ordinal_first_monday_march",
          "expression": "every year on the first monday of march at 10:00 in UTC",
          "next_date": "2026-03-02"
        },
        {
          "name": "ordinal_third_thursday_november",
          "expression": "every year on the third thursday of november at 12:00 in UTC",
          "description": "Thanksgiving 2026",
          "next_date": "2026-11-19"
        },
        {
          "name": "day_of_month_15th_march",
          "expression": "every year on the 15th of march at 09:00 in UTC",
          "next_date": "2026-03-15"
        },
        {
          "name": "last_weekday_december",
          "expression": "every year on the last weekday of december at 17:00 in UTC",
          "description": "Dec 31, 2026 is Thursday",
          "next_date": "2026-12-31"
        },
        {
          "name": "last_friday_december",
          "expression": "every year on the last friday of december at 17:00 in UTC",
          "description": "last Friday of Dec 2026 = Dec 25",
          "next_date": "2026-12-25"
        },
        {
          "name": "three_consecutive_years",
          "expression": "every year on dec 25 at 00:00 in UTC",
          "description": "3 consecutive years",
          "next_n": [
            "2026-12-25T00:00:00+00:00[UTC]",
            "2027-12-25T00:00:00+00:00[UTC]",
            "2028-12-25T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "feb_29_leap_year",
          "expression": "every year on feb 29 at 09:00 in UTC",
          "description": "next leap year is 2028",
          "next_date": "2028-02-29"
        },
        {
          "name": "every_2_years",
          "expression": "every 2 years on dec 25 at 00:00 in UTC",
          "description": "epoch anchor, 2026 (offset 56, 56%2=0) aligned, then 2028, 2030, 2032",
          "next_n": [
            "2026-12-25T00:00:00+00:00[UTC]",
            "2028-12-25T00:00:00+00:00[UTC]",
            "2030-12-25T00:00:00+00:00[UTC]",
            "2032-12-25T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_3_years",
          "expression": "every 3 years on dec 25 at 00:00 in UTC",
          "description": "epoch anchor, 2026 offset=56 (56%3=2 skip), 2027 (57%3=0 aligned), then 2030, 2033",
          "next_n": [
            "2027-12-25T00:00:00+00:00[UTC]",
            "2030-12-25T00:00:00+00:00[UTC]",
            "2033-12-25T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_2_years_with_starting",
          "expression": "every 2 years on dec 25 at 00:00 starting 2025-01-01 in UTC",
          "description": "anchor 2025, offset: 2025=0, 2026=1 (skip), 2027=2 (aligned), 2029, 2031",
          "next_n": [
            "2027-12-25T00:00:00+00:00[UTC]",
            "2029-12-25T00:00:00+00:00[UTC]",
            "2031-12-25T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_2_years_ordinal_target",
          "expression": "every 2 years on the first monday of mar at 10:00 in UTC",
          "description": "epoch anchor, 2026 offset=56 (56%2=0 aligned), fires 2026, 2028, 2030",
          "next_n": [
            "2026-03-02T10:00:00+00:00[UTC]",
            "2028-03-06T10:00:00+00:00[UTC]",
            "2030-03-04T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_2_years_last_weekday_target",
          "expression": "every 2 years on the last weekday of dec at 17:00 in UTC",
          "description": "epoch anchor, 2026 offset=56 (56%2=0 aligned), fires 2026, 2028, 2030",
          "next_n": [
            "2026-12-31T17:00:00+00:00[UTC]",
            "2028-12-29T17:00:00+00:00[UTC]",
            "2030-12-31T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_4_years_feb_29",
          "expression": "every 4 years on feb 29 at 09:00 starting 2024-01-01 in UTC",
          "description": "anchor 2024 (leap year), aligned years: 2024,2028,2032,2036  all leap years",
          "next_n": [
            "2028-02-29T09:00:00+00:00[UTC]",
            "2032-02-29T09:00:00+00:00[UTC]",
            "2036-02-29T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "yearly_with_iso_except",
          "expression": "every year on dec 31 at 23:59 except 2026-12-31 in UTC",
          "description": "yearly + ISO exception: skips 2026, fires 2027, 2028, 2029",
          "next_n": [
            "2027-12-31T23:59:00+00:00[UTC]",
            "2028-12-31T23:59:00+00:00[UTC]",
            "2029-12-31T23:59:00+00:00[UTC]"
          ]
        }
      ]
    },
    "except": {
      "tests": [
        {
          "name": "skip_christmas",
          "expression": "every weekday at 09:00 except dec 25, jan 1 in UTC",
          "description": "Dec 25 (Friday) is excepted, next = Dec 28 (Monday)",
          "now": "2026-12-24T20:00:00+00:00[UTC]",
          "next_date": "2026-12-28"
        },
        {
          "name": "skip_iso_date",
          "expression": "every day at 09:00 except 2026-02-07 in UTC",
          "description": "Feb 7 excepted, next = Feb 8",
          "next_date": "2026-02-08"
        },
        {
          "name": "skip_consecutive_dates",
          "expression": "every day at 09:00 except 2026-02-07, 2026-02-08 in UTC",
          "description": "skip consecutive excepted dates",
          "next_date": "2026-02-09"
        },
        {
          "name": "recurring_named_exception",
          "expression": "every day at 09:00 except jan 1 in UTC",
          "description": "named exceptions recur every year",
          "now": "2026-12-31T10:00:00+00:00[UTC]",
          "next_date": "2027-01-02"
        },
        {
          "name": "iso_exception_one_year",
          "expression": "every year on dec 25 at 00:00 except 2026-12-25 in UTC",
          "description": "ISO exception skips one specific year",
          "next_date": "2027-12-25"
        },
        {
          "name": "named_exception_all_occurrences",
          "expression": "every year on jan 1 at 00:00 except jan 1 in UTC",
          "description": "named exception matches every occurrence, no results",
          "next_n_count": 5,
          "next_n": []
        },
        {
          "name": "interval_day_excepted",
          "expression": "every 30 min from 09:00 to 17:00 except 2026-02-06 in UTC",
          "description": "entire day excepted, next = tomorrow 09:00",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "ordinal_skip_months",
          "expression": "every month on the first monday at 10:00 except 2026-03-02 in UTC",
          "description": "skip Mar 2, get Apr/May/Jun first Mondays",
          "next_n": [
            "2026-04-06T10:00:00+00:00[UTC]",
            "2026-05-04T10:00:00+00:00[UTC]",
            "2026-06-01T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "month_repeat_skip",
          "expression": "every month on the 1st at 09:00 except 2026-03-01 in UTC",
          "description": "Mar 1 excepted, skip from Feb to Apr",
          "next_n": [
            "2026-04-01T09:00:00+00:00[UTC]",
            "2026-05-01T09:00:00+00:00[UTC]",
            "2026-06-01T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "week_repeat_skip",
          "expression": "every 2 weeks on monday at 9:00 except 2026-02-16 starting 2026-02-02 in UTC",
          "description": "Feb 16 excepted, next after Feb 6 = Mar 2",
          "next_date": "2026-03-02"
        },
        {
          "name": "single_date_named_skip",
          "expression": "on feb 14 at 9:00 except 2026-02-14 in UTC",
          "description": "this year excepted, next = 2027",
          "next_date": "2027-02-14"
        }
      ]
    },
    "until": {
      "tests": [
        {
          "name": "limits_results",
          "expression": "every day at 09:00 until 2026-02-10 in UTC",
          "description": "limited to 4 results (Feb 7-10)",
          "next_n_count": 10,
          "next_n": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "past_until_no_results",
          "expression": "every day at 09:00 until 2026-02-05 in UTC",
          "description": "until already passed, no results",
          "next": null
        },
        {
          "name": "named_until_date",
          "expression": "every day at 09:00 until feb 10 in UTC",
          "description": "named until date",
          "next_n_count": 10,
          "next_n_length": 4
        },
        {
          "name": "yearly_with_until",
          "expression": "every year on dec 25 at 00:00 until 2028-12-31 in UTC",
          "description": "yearly with until",
          "next_n_count": 10,
          "next_n": [
            "2026-12-25T00:00:00+00:00[UTC]",
            "2027-12-25T00:00:00+00:00[UTC]",
            "2028-12-25T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_with_until",
          "expression": "every month on the first monday at 10:00 until 2026-06-01 in UTC",
          "description": "ordinal with until",
          "next_n_count": 10,
          "next_n_length": 4
        },
        {
          "name": "monthly_with_until",
          "expression": "every month on the 15th at 09:00 until 2026-04-15 in UTC",
          "description": "monthly with until",
          "next_n_count": 10,
          "next_n": [
            "2026-02-15T09:00:00+00:00[UTC]",
            "2026-03-15T09:00:00+00:00[UTC]",
            "2026-04-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "interval_with_until",
          "expression": "every 2 hours from 08:00 to 20:00 until 2026-02-07 in UTC",
          "description": "interval with until: today and tomorrow only",
          "next": "2026-02-06T14:00:00+00:00[UTC]"
        },
        {
          "name": "week_repeat_with_until",
          "expression": "every 2 weeks on monday at 9:00 until 2026-04-01 starting 2026-02-02 in UTC",
          "description": "biweekly with until: Feb 16, Mar 2, Mar 16, Mar 30 all <= Apr 1",
          "next_n_count": 10,
          "next_n": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]",
            "2026-03-30T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "single_date_named_with_until",
          "expression": "on feb 14 at 9:00 until 2027-12-31 in UTC",
          "description": "named date with until: fires 2026 and 2027",
          "next_n_count": 5,
          "next_n": [
            "2026-02-14T09:00:00+00:00[UTC]",
            "2027-02-14T09:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "except_and_until": {
      "tests": [
        {
          "name": "combined",
          "expression": "every day at 09:00 except 2026-02-08 until 2026-02-10 in UTC",
          "description": "Feb 7, skip 8, Feb 9, Feb 10",
          "next_n_count": 10,
          "next_n": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "during_except_until_triple",
          "expression": "every day at 09:00 except 2026-02-10 until 2026-02-15 during feb in UTC",
          "description": "triple modifier: during=feb, except=Feb 10, until=Feb 15. Results: Feb 7-9, 11-15",
          "next_n_count": 20,
          "next_n": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]",
            "2026-02-14T09:00:00+00:00[UTC]",
            "2026-02-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "daily_multi_except_until",
          "expression": "every day at 09:00 except 2026-02-08, 2026-02-09 until 2026-02-12 in UTC",
          "description": "two ISO exceptions plus until: Feb 7, skip 8-9, Feb 10-12",
          "next_n_count": 10,
          "next_n": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "weekday_except_named_until",
          "expression": "every weekday at 09:00 except dec 25 until 2026-03-15 in UTC",
          "description": "weekday + named holiday exception + until limit. Dec 25 exception has no effect before March cutoff",
          "next_n_count": 30,
          "next_n": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]",
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-02-17T09:00:00+00:00[UTC]",
            "2026-02-18T09:00:00+00:00[UTC]",
            "2026-02-19T09:00:00+00:00[UTC]",
            "2026-02-20T09:00:00+00:00[UTC]",
            "2026-02-23T09:00:00+00:00[UTC]",
            "2026-02-24T09:00:00+00:00[UTC]",
            "2026-02-25T09:00:00+00:00[UTC]",
            "2026-02-26T09:00:00+00:00[UTC]",
            "2026-02-27T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-03-04T09:00:00+00:00[UTC]",
            "2026-03-05T09:00:00+00:00[UTC]",
            "2026-03-06T09:00:00+00:00[UTC]",
            "2026-03-09T09:00:00+00:00[UTC]",
            "2026-03-10T09:00:00+00:00[UTC]",
            "2026-03-11T09:00:00+00:00[UTC]",
            "2026-03-12T09:00:00+00:00[UTC]",
            "2026-03-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_except_named_until",
          "expression": "every month on the 1st at 09:00 except jan 1 until 2026-08-01 in UTC",
          "description": "monthly except New Year's Day, with until. Jan 1 exception irrelevant in range.",
          "next_n_count": 10,
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-04-01T09:00:00+00:00[UTC]",
            "2026-05-01T09:00:00+00:00[UTC]",
            "2026-06-01T09:00:00+00:00[UTC]",
            "2026-07-01T09:00:00+00:00[UTC]",
            "2026-08-01T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "weekly_except_until",
          "expression": "every monday at 09:00 except 2026-02-16 until 2026-03-16 in UTC",
          "description": "weekly monday + skip one + until mid-March",
          "next_n_count": 10,
          "next_n": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-23T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-09T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "multi_time_except_until",
          "expression": "every day at 09:00, 12:00, 17:00 except 2026-02-08 until 2026-02-10 in UTC",
          "description": "3 fire times/day + except Feb 8 + until Feb 10",
          "next_n_count": 15,
          "next_n": [
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-07T12:00:00+00:00[UTC]",
            "2026-02-07T17:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-09T12:00:00+00:00[UTC]",
            "2026-02-09T17:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-10T12:00:00+00:00[UTC]",
            "2026-02-10T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "biweekly_except_until",
          "expression": "every 2 weeks on monday at 09:00 except 2026-03-02 until 2026-04-30 starting 2026-01-05 in UTC",
          "description": "biweekly + except + until + starting. Skip Mar 2.",
          "next_n_count": 10,
          "next_n": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]",
            "2026-03-30T09:00:00+00:00[UTC]",
            "2026-04-13T09:00:00+00:00[UTC]",
            "2026-04-27T09:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "n_occurrences": {
      "tests": [
        {
          "name": "five_weekdays",
          "expression": "every weekday at 9:00 in UTC",
          "next_n": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "five_first_mondays",
          "expression": "every month on the first monday at 10:00 in UTC",
          "next_n": [
            "2026-03-02T10:00:00+00:00[UTC]",
            "2026-04-06T10:00:00+00:00[UTC]",
            "2026-05-04T10:00:00+00:00[UTC]",
            "2026-06-01T10:00:00+00:00[UTC]",
            "2026-07-06T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "three_monthly",
          "expression": "every month on the 15th at 09:00 in UTC",
          "next_n": [
            "2026-02-15T09:00:00+00:00[UTC]",
            "2026-03-15T09:00:00+00:00[UTC]",
            "2026-04-15T09:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "multi_time": {
      "tests": [
        {
          "name": "picks_later_today",
          "expression": "every day at 09:00, 17:00 in UTC",
          "description": "09:00 passed, 17:00 hasn't yet",
          "next": "2026-02-06T17:00:00+00:00[UTC]"
        },
        {
          "name": "both_passed_next_day",
          "expression": "every day at 09:00, 11:00 in UTC",
          "description": "both times passed today, next is tomorrow earliest",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "three_times_picks_last",
          "expression": "every day at 09:00, 12:00, 17:00 in UTC",
          "description": "09:00 and 12:00 passed (exact match is not future), next = 17:00",
          "next": "2026-02-06T17:00:00+00:00[UTC]"
        },
        {
          "name": "weekday_filter",
          "expression": "every weekday at 09:00, 17:00 in UTC",
          "description": "Friday, 09:00 passed, 17:00 hasn't",
          "next": "2026-02-06T17:00:00+00:00[UTC]"
        },
        {
          "name": "interleaving_n_occurrences",
          "expression": "every day at 09:00, 17:00 in UTC",
          "description": "4 occurrences interleaving times",
          "next_n": [
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-07T17:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "month_repeat",
          "expression": "every month on the 1st at 09:00, 17:00 in UTC",
          "description": "Feb 1 passed entirely, next = Mar 1 at 09:00",
          "next": "2026-03-01T09:00:00+00:00[UTC]"
        },
        {
          "name": "ordinal_weekday",
          "expression": "every month on the first monday at 10:00, 14:00 in UTC",
          "description": "Feb first Monday (Feb 2) passed, next = Mar 2 at 10:00",
          "next": "2026-03-02T10:00:00+00:00[UTC]"
        },
        {
          "name": "year_repeat",
          "expression": "every year on dec 25 at 00:00, 12:00 in UTC",
          "description": "Dec 25 not yet, next = Dec 25 at 00:00 (earliest)",
          "next": "2026-12-25T00:00:00+00:00[UTC]"
        },
        {
          "name": "single_date_first_time",
          "expression": "on 2026-03-15 at 09:00, 17:00 in UTC",
          "description": "single date with two times, first time wins",
          "next": "2026-03-15T09:00:00+00:00[UTC]"
        },
        {
          "name": "single_date_both_times",
          "expression": "on 2026-03-15 at 09:00, 17:00 in UTC",
          "description": "single date multi-time generates both occurrences",
          "next_n": [
            "2026-03-15T09:00:00+00:00[UTC]",
            "2026-03-15T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_except",
          "expression": "every day at 09:00, 17:00 except 2026-02-07 in UTC",
          "description": "multi-time with except: skip Feb 7 entirely",
          "next_n": [
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-08T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "week_repeat",
          "expression": "every 2 weeks on monday at 09:00, 17:00 starting 2026-02-02 in UTC",
          "description": "week repeat + multi-time: interleaved across bi-weekly Mondays",
          "next_n": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-02-16T17:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-02T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_until",
          "expression": "every day at 09:00, 17:00 until 2026-02-08 in UTC",
          "description": "multi-time with until: 5 occurrences then stops",
          "next_n_count": 10,
          "next_n": [
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-07T17:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-08T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_during_current_month",
          "expression": "every day at 09:00, 17:00 during feb in UTC",
          "description": "multi-time + during: 09:00 passed, 17:00 in Feb",
          "next": "2026-02-06T17:00:00+00:00[UTC]"
        },
        {
          "name": "with_during_wrong_month",
          "expression": "every day at 09:00, 17:00 during mar in UTC",
          "description": "multi-time + during wrong month: skip to Mar",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-01T17:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-02T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "day_range_during",
          "expression": "every month on the 1st to 3rd at 09:00 during mar, jun in UTC",
          "description": "day range + during: Mar 1-3 then Jun 1-3",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-06-01T09:00:00+00:00[UTC]",
            "2026-06-02T09:00:00+00:00[UTC]",
            "2026-06-03T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "day_range_multi_time_during",
          "expression": "every month on the 1st to 3rd at 09:00, 17:00 during mar in UTC",
          "description": "triple combo: day range + multi-time + during",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-01T17:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-02T17:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-03-03T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "during_except_multi_time",
          "expression": "every day at 09:00, 17:00 except 2026-03-15 during mar in UTC",
          "description": "during + except + multi-time: skip Mar 15 entirely",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-01T17:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-02T17:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-03-03T17:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "during": {
      "tests": [
        {
          "name": "current_month",
          "expression": "every day at 09:00 during feb in UTC",
          "description": "February is current month, next = tomorrow",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "wrong_month_skip",
          "expression": "every day at 09:00 during mar in UTC",
          "description": "Feb excluded, skips to March",
          "next": "2026-03-01T09:00:00+00:00[UTC]"
        },
        {
          "name": "multi_month_skip",
          "expression": "every day at 09:00 during jan, mar in UTC",
          "description": "Feb excluded, next = Mar 1",
          "next": "2026-03-01T09:00:00+00:00[UTC]"
        },
        {
          "name": "weekday_filter",
          "expression": "every weekday at 09:00 during feb in UTC",
          "description": "Feb active, Friday 09:00 passed, next weekday = Mon",
          "next": "2026-02-09T09:00:00+00:00[UTC]"
        },
        {
          "name": "with_until",
          "expression": "every day at 09:00 until 2026-02-10 during feb in UTC",
          "description": "limited by both during and until",
          "next_n_count": 10,
          "next_n": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "multi_month_n_occurrences",
          "expression": "every day at 09:00 during jan, mar in UTC",
          "description": "skips Feb entirely, 3 occurrences from Mar",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_except",
          "expression": "every weekday at 09:00 except 2026-03-02 during mar in UTC",
          "description": "during + except: skip Mar 2 (Monday)",
          "next_n": [
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-03-04T09:00:00+00:00[UTC]",
            "2026-03-05T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "interval_current_month",
          "expression": "every 30 min from 09:00 to 17:00 during feb in UTC",
          "description": "interval + during: current month active",
          "next": "2026-02-06T12:30:00+00:00[UTC]"
        },
        {
          "name": "interval_wrong_month",
          "expression": "every 30 min from 09:00 to 17:00 during mar in UTC",
          "description": "interval + during: wrong month, skip to Mar",
          "next": "2026-03-01T09:00:00+00:00[UTC]"
        },
        {
          "name": "month_repeat",
          "expression": "every month on the 1st at 09:00 during mar, jun in UTC",
          "description": "monthly + during: Feb excluded, next = Mar 1",
          "next": "2026-03-01T09:00:00+00:00[UTC]"
        },
        {
          "name": "ordinal_weekday",
          "expression": "every month on the first monday at 10:00 during mar in UTC",
          "description": "ordinal + during: Feb excluded, first Monday of Mar = Mar 2",
          "next_date": "2026-03-02"
        },
        {
          "name": "year_repeat_matching",
          "expression": "every year on dec 25 at 00:00 during dec in UTC",
          "description": "yearly + during dec: Dec 25 is in December, matches",
          "next_date": "2026-12-25"
        },
        {
          "name": "year_repeat_never_fires",
          "expression": "every year on jul 4 at 12:00 during jan in UTC",
          "description": "yearly + during wrong month: Jul 4 not in Jan, never fires",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "week_repeat",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-02-02 during mar in UTC",
          "description": "week repeat + during: Feb excluded, next anchor-aligned Monday in Mar",
          "next_date": "2026-03-02"
        },
        {
          "name": "single_date_matching_month",
          "expression": "on feb 14 at 9:00 during feb in UTC",
          "description": "named date in matching month: fires normally",
          "next_date": "2026-02-14"
        },
        {
          "name": "single_date_wrong_month",
          "expression": "on feb 14 at 9:00 during mar in UTC",
          "description": "named date in wrong month: never fires",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "day_interval_during_single_month",
          "expression": "every 3 days at 09:00 starting 2026-03-01 during mar in UTC",
          "description": "every 3 days only during March: fires 1st, 4th, 7th, 10th, 13th",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-04T09:00:00+00:00[UTC]",
            "2026-03-07T09:00:00+00:00[UTC]",
            "2026-03-10T09:00:00+00:00[UTC]",
            "2026-03-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "daily_starting_distant_past",
          "expression": "every day at 09:00 starting 2020-01-01 in UTC",
          "description": "starting date far in the past: schedule still works normally from now",
          "next_n": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "day_interval_starting_alignment",
          "expression": "every 3 days at 09:00 starting 2020-01-01 in UTC",
          "description": "3-day interval with distant past anchor: alignment still computed correctly",
          "next_n": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "quarterly_via_during",
          "expression": "every month on the 1st at 09:00 during jan, apr, jul, oct in UTC",
          "description": "quarterly schedule via during clause: fires 1st of Jan, Apr, Jul, Oct",
          "next_n_count": 4,
          "next_n": [
            "2026-04-01T09:00:00+00:00[UTC]",
            "2026-07-01T09:00:00+00:00[UTC]",
            "2026-10-01T09:00:00+00:00[UTC]",
            "2027-01-01T09:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "day_ranges": {
      "tests": [
        {
          "name": "range_passed_next_month",
          "expression": "every month on the 1st to 5th at 09:00 in UTC",
          "description": "Feb 1-5 passed (now Feb 6), next = Mar 1",
          "next": "2026-03-01T09:00:00+00:00[UTC]"
        },
        {
          "name": "range_within_current_month",
          "expression": "every month on the 1st to 15th at 09:00 in UTC",
          "description": "Feb 6 09:00 passed, next = Feb 7",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "range_mixed_with_single",
          "expression": "every month on the 1st to 3rd, 15th at 09:00 in UTC",
          "description": "Feb 1-3 passed, next = Feb 15",
          "next": "2026-02-15T09:00:00+00:00[UTC]"
        },
        {
          "name": "n_occurrences_spanning_months",
          "expression": "every month on the 1st to 5th at 09:00 in UTC",
          "description": "n occurrences spanning months",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-03-04T09:00:00+00:00[UTC]",
            "2026-03-05T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_multi_time",
          "expression": "every month on the 1st to 5th at 09:00, 17:00 in UTC",
          "description": "day range + multi-time: 5 days x 2 times",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-01T17:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-02T17:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_except",
          "expression": "every month on the 1st to 5th at 09:00 except 2026-03-01 in UTC",
          "description": "day range + except: Mar 1 skipped, next = Mar 2",
          "next": "2026-03-02T09:00:00+00:00[UTC]"
        },
        {
          "name": "with_until",
          "expression": "every month on the 1st to 5th at 09:00 until 2026-04-05 in UTC",
          "description": "day range + until: Mar 1-5 + Apr 1-5 = 10 results",
          "next_n_count": 20,
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-03-04T09:00:00+00:00[UTC]",
            "2026-03-05T09:00:00+00:00[UTC]",
            "2026-04-01T09:00:00+00:00[UTC]",
            "2026-04-02T09:00:00+00:00[UTC]",
            "2026-04-03T09:00:00+00:00[UTC]",
            "2026-04-04T09:00:00+00:00[UTC]",
            "2026-04-05T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_during",
          "expression": "every month on the 1st to 5th at 09:00 during mar in UTC",
          "description": "day range + during: only March, 5 results then year boundary",
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-03-04T09:00:00+00:00[UTC]",
            "2026-03-05T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "end_of_month_range_february",
          "expression": "every month on the 28th to 31st at 09:00 in UTC",
          "description": "range 28-31 in Feb (non-leap, 28 days): only 28th fires. Mar has all 4.",
          "now": "2026-01-25T12:00:00+00:00[UTC]",
          "next_n_count": 8,
          "next_n": [
            "2026-01-28T09:00:00+00:00[UTC]",
            "2026-01-29T09:00:00+00:00[UTC]",
            "2026-01-30T09:00:00+00:00[UTC]",
            "2026-01-31T09:00:00+00:00[UTC]",
            "2026-02-28T09:00:00+00:00[UTC]",
            "2026-03-28T09:00:00+00:00[UTC]",
            "2026-03-29T09:00:00+00:00[UTC]",
            "2026-03-30T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "range_with_named_except",
          "expression": "every month on the 1st to 3rd at 09:00 except jan 1 in UTC",
          "description": "day range + named exception: Jan 1 excluded, fires 2-3 in Jan, full range other months",
          "next_n_count": 6,
          "next_n": [
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]",
            "2026-04-01T09:00:00+00:00[UTC]",
            "2026-04-02T09:00:00+00:00[UTC]",
            "2026-04-03T09:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "matches": {
      "description": "Tests for the matches(datetime) function. Each entry has an expression and a datetime; 'expected' is true/false.",
      "tests": [
        {
          "name": "weekday_monday",
          "expression": "every weekday at 09:00 in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "Monday 09:00"
        },
        {
          "name": "weekday_saturday_no_match",
          "expression": "every weekday at 09:00 in UTC",
          "datetime": "2026-02-07T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "Saturday 09:00"
        },
        {
          "name": "wrong_time",
          "expression": "every day at 09:00 in UTC",
          "datetime": "2026-02-09T10:00:00+00:00[UTC]",
          "expected": false,
          "description": "wrong time"
        },
        {
          "name": "interval_match",
          "expression": "every 30 min from 09:00 to 17:00 in UTC",
          "datetime": "2026-02-09T10:30:00+00:00[UTC]",
          "expected": true,
          "description": "interval match at 10:30"
        },
        {
          "name": "interval_no_match",
          "expression": "every 30 min from 09:00 to 17:00 in UTC",
          "datetime": "2026-02-09T10:15:00+00:00[UTC]",
          "expected": false,
          "description": "interval no match at 10:15"
        },
        {
          "name": "monthly_match",
          "expression": "every month on the 1st at 09:00 in UTC",
          "datetime": "2026-03-01T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "monthly match"
        },
        {
          "name": "monthly_wrong_day",
          "expression": "every month on the 1st at 09:00 in UTC",
          "datetime": "2026-03-02T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "monthly wrong day"
        },
        {
          "name": "yearly_match",
          "expression": "every year on dec 25 at 00:00 in UTC",
          "datetime": "2026-12-25T00:00:00+00:00[UTC]",
          "expected": true,
          "description": "yearly match"
        },
        {
          "name": "yearly_wrong_day",
          "expression": "every year on dec 25 at 00:00 in UTC",
          "datetime": "2026-12-24T00:00:00+00:00[UTC]",
          "expected": false,
          "description": "yearly wrong day"
        },
        {
          "name": "ordinal_first_monday",
          "expression": "every month on the first monday at 10:00 in UTC",
          "datetime": "2026-03-02T10:00:00+00:00[UTC]",
          "expected": true,
          "description": "ordinal match first monday"
        },
        {
          "name": "ordinal_wrong_week",
          "expression": "every month on the first monday at 10:00 in UTC",
          "datetime": "2026-03-09T10:00:00+00:00[UTC]",
          "expected": false,
          "description": "ordinal wrong week"
        },
        {
          "name": "ordinal_last_friday_match",
          "expression": "every month on the last friday at 16:00 in UTC",
          "datetime": "2026-02-27T16:00:00+00:00[UTC]",
          "expected": true,
          "description": "ordinal match last friday"
        },
        {
          "name": "ordinal_last_friday_wrong_week",
          "expression": "every month on the last friday at 16:00 in UTC",
          "datetime": "2026-02-20T16:00:00+00:00[UTC]",
          "expected": false,
          "description": "ordinal wrong week"
        },
        {
          "name": "week_repeat_match",
          "expression": "every 2 weeks on monday at 9:00 starting 2026-02-02 in UTC",
          "datetime": "2026-02-16T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "week repeat match"
        },
        {
          "name": "week_repeat_wrong_week",
          "expression": "every 2 weeks on monday at 9:00 starting 2026-02-02 in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "week repeat wrong week"
        },
        {
          "name": "single_date_match",
          "expression": "on 2026-03-15 at 14:30 in UTC",
          "datetime": "2026-03-15T14:30:00+00:00[UTC]",
          "expected": true,
          "description": "single date match"
        },
        {
          "name": "single_date_wrong_day",
          "expression": "on 2026-03-15 at 14:30 in UTC",
          "datetime": "2026-03-16T14:30:00+00:00[UTC]",
          "expected": false,
          "description": "single date wrong day"
        },
        {
          "name": "single_named_date_match",
          "expression": "on feb 14 at 9:00 in UTC",
          "datetime": "2026-02-14T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "single named date match"
        },
        {
          "name": "excepted_date_no_match",
          "expression": "every weekday at 09:00 except dec 25 in UTC",
          "datetime": "2026-12-25T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "excepted date does not match"
        },
        {
          "name": "non_excepted_date_match",
          "expression": "every weekday at 09:00 except dec 25 in UTC",
          "datetime": "2026-12-28T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "non-excepted date matches"
        },
        {
          "name": "before_until_match",
          "expression": "every day at 09:00 until 2026-02-10 in UTC",
          "datetime": "2026-02-08T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "before until matches"
        },
        {
          "name": "after_until_no_match",
          "expression": "every day at 09:00 until 2026-02-10 in UTC",
          "datetime": "2026-02-11T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "after until does not match"
        },
        {
          "name": "multi_time_second",
          "expression": "every day at 09:00, 17:00 in UTC",
          "datetime": "2026-02-09T17:00:00+00:00[UTC]",
          "expected": true,
          "description": "multi-time matches second time"
        },
        {
          "name": "multi_time_first",
          "expression": "every day at 09:00, 17:00 in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "multi-time matches first time"
        },
        {
          "name": "multi_time_no_match",
          "expression": "every day at 09:00, 17:00 in UTC",
          "datetime": "2026-02-09T12:00:00+00:00[UTC]",
          "expected": false,
          "description": "multi-time no match at unlisted time"
        },
        {
          "name": "during_matching_month",
          "expression": "every day at 09:00 during feb in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "during: matching month"
        },
        {
          "name": "during_wrong_month",
          "expression": "every day at 09:00 during mar in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "during: wrong month"
        },
        {
          "name": "during_right_month_wrong_time",
          "expression": "every day at 09:00 during feb in UTC",
          "datetime": "2026-02-09T10:00:00+00:00[UTC]",
          "expected": false,
          "description": "during: right month wrong time"
        },
        {
          "name": "day_range_in_range",
          "expression": "every month on the 1st to 5th at 09:00 in UTC",
          "datetime": "2026-03-03T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "day range: day 3 in 1-5"
        },
        {
          "name": "day_range_outside",
          "expression": "every month on the 1st to 5th at 09:00 in UTC",
          "datetime": "2026-03-06T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "day range: day 6 outside 1-5"
        },
        {
          "name": "day_range_start_boundary",
          "expression": "every month on the 1st to 5th at 09:00 in UTC",
          "datetime": "2026-03-01T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "day range: start boundary"
        },
        {
          "name": "day_range_end_boundary",
          "expression": "every month on the 1st to 5th at 09:00 in UTC",
          "datetime": "2026-03-05T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "day range: end boundary"
        },
        {
          "name": "multi_time_during_match",
          "expression": "every day at 09:00, 17:00 during feb in UTC",
          "datetime": "2026-02-09T17:00:00+00:00[UTC]",
          "expected": true,
          "description": "multi-time + during: right month, second time"
        },
        {
          "name": "multi_time_during_wrong_month",
          "expression": "every day at 09:00, 17:00 during feb in UTC",
          "datetime": "2026-03-01T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "multi-time + during: wrong month"
        },
        {
          "name": "multi_time_during_wrong_time",
          "expression": "every day at 09:00, 17:00 during feb in UTC",
          "datetime": "2026-02-09T12:00:00+00:00[UTC]",
          "expected": false,
          "description": "multi-time + during: right month, wrong time"
        },
        {
          "name": "day_range_multi_time_match",
          "expression": "every month on the 1st to 5th at 09:00, 17:00 in UTC",
          "datetime": "2026-03-03T17:00:00+00:00[UTC]",
          "expected": true,
          "description": "day range + multi-time: day in range, second time"
        },
        {
          "name": "day_range_multi_time_wrong_time",
          "expression": "every month on the 1st to 5th at 09:00, 17:00 in UTC",
          "datetime": "2026-03-03T12:00:00+00:00[UTC]",
          "expected": false,
          "description": "day range + multi-time: day in range, wrong time"
        },
        {
          "name": "day_range_multi_time_outside",
          "expression": "every month on the 1st to 5th at 09:00, 17:00 in UTC",
          "datetime": "2026-03-06T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "day range + multi-time: day outside range"
        },
        {
          "name": "day_range_during_match",
          "expression": "every month on the 1st to 5th at 09:00 during mar in UTC",
          "datetime": "2026-03-03T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "day range + during: right month, day in range"
        },
        {
          "name": "day_range_during_wrong_month",
          "expression": "every month on the 1st to 5th at 09:00 during mar in UTC",
          "datetime": "2026-02-03T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "day range + during: wrong month"
        },
        {
          "name": "day_interval_aligned",
          "expression": "every 3 days at 09:00 in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "3-day interval: aligned day"
        },
        {
          "name": "day_interval_not_aligned",
          "expression": "every 3 days at 09:00 in UTC",
          "datetime": "2026-02-07T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "3-day interval: not aligned"
        },
        {
          "name": "day_interval_wrong_time",
          "expression": "every 3 days at 09:00 in UTC",
          "datetime": "2026-02-09T10:00:00+00:00[UTC]",
          "expected": false,
          "description": "3-day interval: aligned day wrong time"
        },
        {
          "name": "month_interval_aligned",
          "expression": "every 2 months on the 1st at 09:00 in UTC",
          "datetime": "2026-03-01T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "2-month interval: aligned month"
        },
        {
          "name": "month_interval_not_aligned",
          "expression": "every 2 months on the 1st at 09:00 in UTC",
          "datetime": "2026-04-01T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "2-month interval: not aligned"
        },
        {
          "name": "ordinal_interval_aligned",
          "expression": "every 2 months on the first monday at 10:00 in UTC",
          "datetime": "2026-03-02T10:00:00+00:00[UTC]",
          "expected": true,
          "description": "ordinal 2-month: aligned"
        },
        {
          "name": "ordinal_interval_not_aligned",
          "expression": "every 2 months on the first monday at 10:00 in UTC",
          "datetime": "2026-04-06T10:00:00+00:00[UTC]",
          "expected": false,
          "description": "ordinal 2-month: not aligned"
        },
        {
          "name": "year_interval_aligned",
          "expression": "every 2 years on dec 25 at 00:00 in UTC",
          "datetime": "2026-12-25T00:00:00+00:00[UTC]",
          "expected": true,
          "description": "2-year interval: aligned year"
        },
        {
          "name": "year_interval_not_aligned",
          "expression": "every 2 years on dec 25 at 00:00 in UTC",
          "datetime": "2027-12-25T00:00:00+00:00[UTC]",
          "expected": false,
          "description": "2-year interval: not aligned"
        },
        {
          "name": "day_interval_starting_aligned",
          "expression": "every 3 days at 09:00 starting 2026-02-06 in UTC",
          "datetime": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "3-day interval with starting anchor: aligned"
        },
        {
          "name": "day_interval_starting_not_aligned",
          "expression": "every 3 days at 09:00 starting 2026-02-06 in UTC",
          "datetime": "2026-02-08T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "3-day interval with starting anchor: not aligned"
        },
        {
          "name": "month_interval_starting_aligned",
          "expression": "every 2 months on the 1st at 09:00 starting 2026-01-01 in UTC",
          "datetime": "2026-03-01T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "2-month interval with starting: aligned"
        },
        {
          "name": "month_interval_starting_not_aligned",
          "expression": "every 2 months on the 1st at 09:00 starting 2026-01-01 in UTC",
          "datetime": "2026-04-01T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "2-month interval with starting: not aligned"
        },
        {
          "name": "dst_gap_resolved_time_matches",
          "expression": "every day at 02:00 in America/New_York",
          "datetime": "2026-03-08T03:00:00-04:00[America/New_York]",
          "expected": true,
          "description": "DST spring-forward: scheduled 2:00 AM does not exist, resolves to 3:00 AM which should match"
        },
        {
          "name": "dst_gap_wall_clock_no_match",
          "expression": "every day at 03:00 in America/New_York",
          "datetime": "2026-03-08T03:00:00-04:00[America/New_York]",
          "expected": true,
          "description": "DST spring-forward: 3:00 AM exists and matches normally"
        },
        {
          "name": "dst_no_gap_exact_match",
          "expression": "every day at 02:00 in America/New_York",
          "datetime": "2026-03-09T02:00:00-04:00[America/New_York]",
          "expected": true,
          "description": "Day after spring-forward: 2:00 AM exists normally"
        },
        {
          "name": "dst_gap_unrelated_time_no_match",
          "expression": "every day at 04:00 in America/New_York",
          "datetime": "2026-03-08T03:00:00-04:00[America/New_York]",
          "expected": false,
          "description": "DST spring-forward: 3:00 AM should not match schedule for 4:00 AM"
        }
      ]
    },
    "leap_year": {
      "tests": [
        {
          "name": "feb_29_next_leap_year",
          "expression": "on feb 29 at 09:00 in UTC",
          "description": "next leap year is 2028",
          "next_date": "2028-02-29"
        },
        {
          "name": "feb_29_multiple_occurrences",
          "expression": "every year on feb 29 at 09:00 in UTC",
          "description": "3 consecutive leap years: 2028, 2032, 2036",
          "next_n": [
            "2028-02-29T09:00:00+00:00[UTC]",
            "2032-02-29T09:00:00+00:00[UTC]",
            "2036-02-29T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "feb_29_with_except",
          "expression": "every year on feb 29 at 09:00 except 2032-02-29 in UTC",
          "description": "skip 2032 leap year, get 2028, 2036, 2040",
          "next_n": [
            "2028-02-29T09:00:00+00:00[UTC]",
            "2036-02-29T09:00:00+00:00[UTC]",
            "2040-02-29T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "feb_29_after_leap_year",
          "expression": "on feb 29 at 09:00 in UTC",
          "description": "now is just after 2028 Feb 29, next is 2032",
          "now": "2028-03-01T00:00:00+00:00[UTC]",
          "next": "2032-02-29T09:00:00+00:00[UTC]"
        },
        {
          "name": "feb_29_multi_time",
          "expression": "every year on feb 29 at 09:00, 17:00 in UTC",
          "description": "two fire times per leap day: morning and evening",
          "next_n_count": 4,
          "next_n": [
            "2028-02-29T09:00:00+00:00[UTC]",
            "2028-02-29T17:00:00+00:00[UTC]",
            "2032-02-29T09:00:00+00:00[UTC]",
            "2032-02-29T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "feb_29_matches_true",
          "expression": "on feb 29 at 09:00 in UTC",
          "datetime": "2028-02-29T09:00:00+00:00[UTC]",
          "expected": true,
          "description": "matches on an actual Feb 29 at the right time"
        },
        {
          "name": "feb_29_matches_non_leap_year",
          "expression": "on feb 29 at 09:00 in UTC",
          "datetime": "2026-02-28T09:00:00+00:00[UTC]",
          "expected": false,
          "description": "Feb 28 in a non-leap year does not match a Feb 29 schedule"
        },
        {
          "name": "feb_29_matches_wrong_time",
          "expression": "on feb 29 at 09:00 in UTC",
          "datetime": "2028-02-29T17:00:00+00:00[UTC]",
          "expected": false,
          "description": "correct date but wrong time does not match"
        }
      ]
    },
    "dst_spring_forward": {
      "description": "Spring forward: March 8, 2026 at 2:00 AM America/New_York. Clocks jump to 3:00 AM. Times 2:00-2:59 do not exist.",
      "tests": [
        {
          "name": "nonexistent_time_pushed_forward",
          "expression": "every day at 02:30 in America/New_York",
          "description": "non-existent time pushed forward to 3:30 AM EDT",
          "now": "2026-03-07T23:00:00-05:00[America/New_York]",
          "next": "2026-03-08T03:30:00-04:00[America/New_York]"
        },
        {
          "name": "resumes_normally_next_day",
          "expression": "every day at 02:30 in America/New_York",
          "description": "resumes normally the next day",
          "now": "2026-03-07T23:00:00-05:00[America/New_York]",
          "next_n": [
            "2026-03-08T03:30:00-04:00[America/New_York]",
            "2026-03-09T02:30:00-04:00[America/New_York]",
            "2026-03-10T02:30:00-04:00[America/New_York]"
          ]
        },
        {
          "name": "interval_skips_gap",
          "expression": "every 30 min from 01:00 to 04:00 in America/New_York",
          "description": "interval skips gap: 1:00, 1:30, then jumps to 3:00",
          "now": "2026-03-08T00:30:00-05:00[America/New_York]",
          "next_n": [
            "2026-03-08T01:00:00-05:00[America/New_York]",
            "2026-03-08T01:30:00-05:00[America/New_York]",
            "2026-03-08T03:00:00-04:00[America/New_York]",
            "2026-03-08T03:30:00-04:00[America/New_York]",
            "2026-03-08T04:00:00-04:00[America/New_York]"
          ]
        },
        {
          "name": "weekday_across_spring_forward",
          "expression": "every weekday at 02:30 in America/New_York",
          "description": "March 8 is Sunday (not weekday), March 9 Monday normal 2:30 AM EDT",
          "now": "2026-03-06T03:00:00-05:00[America/New_York]",
          "next_date": "2026-03-09"
        },
        {
          "name": "multi_time_spring_forward",
          "expression": "every day at 02:30, 14:00 in America/New_York",
          "description": "two fire times: 02:30 pushed to 03:30 on spring-forward day, 14:00 normal",
          "now": "2026-03-07T00:00:00-05:00[America/New_York]",
          "next_n": [
            "2026-03-07T02:30:00-05:00[America/New_York]",
            "2026-03-07T14:00:00-05:00[America/New_York]",
            "2026-03-08T03:30:00-04:00[America/New_York]",
            "2026-03-08T14:00:00-04:00[America/New_York]",
            "2026-03-09T02:30:00-04:00[America/New_York]",
            "2026-03-09T14:00:00-04:00[America/New_York]"
          ]
        },
        {
          "name": "except_on_spring_forward_day",
          "expression": "every day at 02:30 except 2026-03-09 in America/New_York",
          "description": "exception skips Mar 9, spring-forward day (Mar 8) still fires at pushed time",
          "now": "2026-03-07T00:00:00-05:00[America/New_York]",
          "next_n_count": 4,
          "next_n": [
            "2026-03-07T02:30:00-05:00[America/New_York]",
            "2026-03-08T03:30:00-04:00[America/New_York]",
            "2026-03-10T02:30:00-04:00[America/New_York]",
            "2026-03-11T02:30:00-04:00[America/New_York]"
          ]
        },
        {
          "name": "matches_spring_forward_pushed_time",
          "expression": "every day at 02:30 in America/New_York",
          "datetime": "2026-03-08T03:30:00-04:00[America/New_York]",
          "expected": true,
          "description": "pushed time 03:30 on spring-forward day matches schedule for 02:30"
        },
        {
          "name": "matches_spring_forward_normal_day_after",
          "expression": "every day at 02:30 in America/New_York",
          "datetime": "2026-03-09T02:30:00-04:00[America/New_York]",
          "expected": true,
          "description": "normal 02:30 EDT on the day after spring-forward matches"
        },
        {
          "name": "weekday_spring_forward_sequence",
          "expression": "every weekday at 02:30 in America/New_York",
          "description": "weekday schedule: Mar 6 (Fri) EST, Mar 8 (Sun) skipped, Mar 9 (Mon) EDT",
          "now": "2026-03-05T03:00:00-05:00[America/New_York]",
          "next_n": [
            "2026-03-06T02:30:00-05:00[America/New_York]",
            "2026-03-09T02:30:00-04:00[America/New_York]",
            "2026-03-10T02:30:00-04:00[America/New_York]",
            "2026-03-11T02:30:00-04:00[America/New_York]",
            "2026-03-12T02:30:00-04:00[America/New_York]"
          ]
        }
      ]
    },
    "dst_fall_back": {
      "description": "Fall back: November 1, 2026 at 2:00 AM America/New_York. Clocks fall back to 1:00 AM. Times 1:00-1:59 occur twice.",
      "tests": [
        {
          "name": "ambiguous_time_first_occurrence",
          "expression": "every day at 01:30 in America/New_York",
          "description": "ambiguous time resolved to first occurrence (EDT -04:00)",
          "now": "2026-10-31T23:00:00-04:00[America/New_York]",
          "next": "2026-11-01T01:30:00-04:00[America/New_York]"
        },
        {
          "name": "offset_changes_across_fall_back",
          "expression": "every day at 01:30 in America/New_York",
          "description": "offset changes from EDT to EST across fall-back",
          "now": "2026-10-31T23:00:00-04:00[America/New_York]",
          "next_n": [
            "2026-11-01T01:30:00-04:00[America/New_York]",
            "2026-11-02T01:30:00-05:00[America/New_York]",
            "2026-11-03T01:30:00-05:00[America/New_York]"
          ]
        },
        {
          "name": "interval_across_fall_back",
          "expression": "every 30 min from 01:00 to 03:00 in America/New_York",
          "description": "30-min interval spans fall-back: times 01:00-01:30 in EDT, then 02:00+ in EST",
          "now": "2026-10-31T23:00:00-04:00[America/New_York]",
          "next_n": [
            "2026-11-01T01:00:00-04:00[America/New_York]",
            "2026-11-01T01:30:00-04:00[America/New_York]",
            "2026-11-01T02:00:00-05:00[America/New_York]",
            "2026-11-01T02:30:00-05:00[America/New_York]",
            "2026-11-01T03:00:00-05:00[America/New_York]",
            "2026-11-02T01:00:00-05:00[America/New_York]",
            "2026-11-02T01:30:00-05:00[America/New_York]",
            "2026-11-02T02:00:00-05:00[America/New_York]"
          ]
        },
        {
          "name": "multi_time_across_fall_back",
          "expression": "every day at 01:00, 01:30, 02:00 in America/New_York",
          "description": "three fire times spanning the fall-back boundary on Nov 1",
          "now": "2026-10-31T23:00:00-04:00[America/New_York]",
          "next_n": [
            "2026-11-01T01:00:00-04:00[America/New_York]",
            "2026-11-01T01:30:00-04:00[America/New_York]",
            "2026-11-01T02:00:00-05:00[America/New_York]",
            "2026-11-02T01:00:00-05:00[America/New_York]",
            "2026-11-02T01:30:00-05:00[America/New_York]",
            "2026-11-02T02:00:00-05:00[America/New_York]"
          ]
        },
        {
          "name": "exception_on_fall_back_day",
          "expression": "every day at 01:30 except 2026-11-01 in America/New_York",
          "description": "except clause skips fall-back day entirely",
          "now": "2026-10-31T00:00:00-04:00[America/New_York]",
          "next_n_count": 4,
          "next_n": [
            "2026-10-31T01:30:00-04:00[America/New_York]",
            "2026-11-02T01:30:00-05:00[America/New_York]",
            "2026-11-03T01:30:00-05:00[America/New_York]",
            "2026-11-04T01:30:00-05:00[America/New_York]"
          ]
        },
        {
          "name": "weekend_across_fall_back",
          "expression": "every weekend at 01:30 in America/New_York",
          "description": "Nov 1 is Sunday (fall-back day), Oct 31 is Saturday",
          "now": "2026-10-30T12:00:00-04:00[America/New_York]",
          "next_n_count": 4,
          "next_n": [
            "2026-10-31T01:30:00-04:00[America/New_York]",
            "2026-11-01T01:30:00-04:00[America/New_York]",
            "2026-11-07T01:30:00-05:00[America/New_York]",
            "2026-11-08T01:30:00-05:00[America/New_York]"
          ]
        },
        {
          "name": "matches_fall_back_est",
          "expression": "every day at 01:30 in America/New_York",
          "datetime": "2026-11-02T01:30:00-05:00[America/New_York]",
          "expected": true,
          "description": "01:30 EST (after fall-back transition) matches"
        },
        {
          "name": "weekday_across_fall_back",
          "expression": "every monday at 09:00 in America/New_York",
          "description": "Monday schedule across fall-back: Nov 2 in EST",
          "now": "2026-10-30T12:00:00-04:00[America/New_York]",
          "next_n_count": 4,
          "next_n": [
            "2026-11-02T09:00:00-05:00[America/New_York]",
            "2026-11-09T09:00:00-05:00[America/New_York]",
            "2026-11-16T09:00:00-05:00[America/New_York]",
            "2026-11-23T09:00:00-05:00[America/New_York]"
          ]
        }
      ]
    },
    "timezone_default": {
      "description": "When no timezone is specified, implementations MUST default to UTC for deterministic, portable behavior.",
      "tests": [
        {
          "name": "no_timezone_defaults_to_utc",
          "expression": "every day at 09:00",
          "description": "expression without timezone defaults to UTC",
          "next": "2026-02-07T09:00:00+00:00[UTC]"
        },
        {
          "name": "interval_no_timezone_defaults_to_utc",
          "expression": "every 30 min from 09:00 to 17:00",
          "description": "interval expression without timezone defaults to UTC",
          "next": "2026-02-06T12:30:00+00:00[UTC]"
        },
        {
          "name": "month_no_timezone_defaults_to_utc",
          "expression": "every month on the 1st at 09:00",
          "description": "month expression without timezone defaults to UTC",
          "next": "2026-03-01T09:00:00+00:00[UTC]"
        }
      ]
    },
    "occurrences": {
      "description": "Tests for occurrences() iterator - verify first N elements via take",
      "tests": [
        {
          "name": "daily_first_5",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "weekday_first_5",
          "expression": "every weekday at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "interval_first_5",
          "expression": "every 2 hours from 09:00 to 17:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-02-06T13:00:00+00:00[UTC]",
            "2026-02-06T15:00:00+00:00[UTC]",
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-07T11:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_first_5",
          "expression": "every month on the 15th at 09:00 in UTC",
          "from": "2026-01-01T00:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-01-15T09:00:00+00:00[UTC]",
            "2026-02-15T09:00:00+00:00[UTC]",
            "2026-03-15T09:00:00+00:00[UTC]",
            "2026-04-15T09:00:00+00:00[UTC]",
            "2026-05-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_first_5",
          "expression": "every month on the first monday at 09:00 in UTC",
          "from": "2026-01-01T00:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-01-05T09:00:00+00:00[UTC]",
            "2026-02-02T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-04-06T09:00:00+00:00[UTC]",
            "2026-05-04T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "yearly_first_3",
          "expression": "every year on dec 25 at 00:00 in UTC",
          "from": "2025-01-01T00:00:00+00:00[UTC]",
          "take": 3,
          "expected": [
            "2025-12-25T00:00:00+00:00[UTC]",
            "2026-12-25T00:00:00+00:00[UTC]",
            "2027-12-25T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "terminates_on_until",
          "expression": "every day at 09:00 until 2026-02-10 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 10,
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]"
          ],
          "description": "Iterator terminates at 4 even though 10 requested"
        },
        {
          "name": "terminates_single_date",
          "expression": "on 2026-02-14 at 14:00 in UTC",
          "from": "2026-02-01T00:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-02-14T14:00:00+00:00[UTC]"
          ],
          "description": "Single date yields 1 occurrence then terminates"
        },
        {
          "name": "terminates_single_date_past",
          "expression": "on 2026-02-14 at 14:00 in UTC",
          "from": "2026-02-15T00:00:00+00:00[UTC]",
          "take": 5,
          "expected": [],
          "description": "Single date in past yields no occurrences"
        },
        {
          "name": "empty_when_from_after_until",
          "expression": "every day at 09:00 until 2026-02-10 in UTC",
          "from": "2026-02-15T00:00:00+00:00[UTC]",
          "take": 5,
          "expected": [],
          "description": "Iterator empty when from is after until"
        },
        {
          "name": "with_except_clause",
          "expression": "every day at 09:00 except feb 9, feb 10 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_during_clause",
          "expression": "every day at 09:00 during jan, mar in UTC",
          "from": "2026-01-28T00:00:00+00:00[UTC]",
          "take": 5,
          "expected": [
            "2026-01-28T09:00:00+00:00[UTC]",
            "2026-01-29T09:00:00+00:00[UTC]",
            "2026-01-30T09:00:00+00:00[UTC]",
            "2026-01-31T09:00:00+00:00[UTC]",
            "2026-03-01T09:00:00+00:00[UTC]"
          ],
          "description": "Skips February entirely"
        },
        {
          "name": "with_starting_anchor",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-02-09 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 4,
          "expected": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-23T09:00:00+00:00[UTC]",
            "2026-03-09T09:00:00+00:00[UTC]",
            "2026-03-23T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "multiple_times_first_6",
          "expression": "every day at 09:00, 12:00, 17:00 in UTC",
          "from": "2026-02-06T10:00:00+00:00[UTC]",
          "take": 6,
          "expected": [
            "2026-02-06T12:00:00+00:00[UTC]",
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-07T12:00:00+00:00[UTC]",
            "2026-02-07T17:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "different_timezone",
          "expression": "every day at 09:00 in Asia/Tokyo",
          "from": "2026-02-06T00:00:00+09:00[Asia/Tokyo]",
          "take": 3,
          "expected": [
            "2026-02-06T09:00:00+09:00[Asia/Tokyo]",
            "2026-02-07T09:00:00+09:00[Asia/Tokyo]",
            "2026-02-08T09:00:00+09:00[Asia/Tokyo]"
          ]
        },
        {
          "name": "take_zero",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 0,
          "expected": []
        },
        {
          "name": "take_one",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "take": 1,
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]"
          ]
        }
      ]
    },
    "between": {
      "description": "Tests for between() range queries",
      "tests": [
        {
          "name": "daily_one_week",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-13T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "weekday_range",
          "expression": "every weekday at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-13T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "weekend_range",
          "expression": "every weekend at 10:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-22T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-07T10:00:00+00:00[UTC]",
            "2026-02-08T10:00:00+00:00[UTC]",
            "2026-02-14T10:00:00+00:00[UTC]",
            "2026-02-15T10:00:00+00:00[UTC]",
            "2026-02-21T10:00:00+00:00[UTC]",
            "2026-02-22T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "multiple_times_per_day",
          "expression": "every day at 09:00, 12:00, 17:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-07T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-07T12:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_n_days",
          "expression": "every 3 days at 09:00 starting 2026-02-01 in UTC",
          "from": "2026-02-01T00:00:00+00:00[UTC]",
          "to": "2026-02-15T00:00:00+00:00[UTC]",
          "expected": [
            "2026-02-01T09:00:00+00:00[UTC]",
            "2026-02-04T09:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "interval_hours",
          "expression": "every 2 hours from 09:00 to 17:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-07T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-06T13:00:00+00:00[UTC]",
            "2026-02-06T15:00:00+00:00[UTC]",
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-07T11:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "interval_minutes",
          "expression": "every 30 min from 09:00 to 10:00 in UTC",
          "from": "2026-02-06T08:00:00+00:00[UTC]",
          "to": "2026-02-06T11:00:00+00:00[UTC]",
          "expected": [
            "2026-02-06T09:00:00+00:00[UTC]",
            "2026-02-06T09:30:00+00:00[UTC]",
            "2026-02-06T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "interval_on_weekdays",
          "expression": "every 2 hours from 09:00 to 17:00 on weekday in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-09T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-06T13:00:00+00:00[UTC]",
            "2026-02-06T15:00:00+00:00[UTC]",
            "2026-02-06T17:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-09T11:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "week_repeat_single_day",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-02-09 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-03-15T00:00:00+00:00[UTC]",
          "expected": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-23T09:00:00+00:00[UTC]",
            "2026-03-09T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "week_repeat_multiple_days",
          "expression": "every 1 weeks on monday, wednesday, friday at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-16T00:00:00+00:00[UTC]",
          "expected": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_single_day",
          "expression": "every month on the 15th at 09:00 in UTC",
          "from": "2026-01-01T00:00:00+00:00[UTC]",
          "to": "2026-04-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-01-15T09:00:00+00:00[UTC]",
            "2026-02-15T09:00:00+00:00[UTC]",
            "2026-03-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_day_range",
          "expression": "every month on the 1st to 3rd at 09:00 in UTC",
          "from": "2026-02-01T00:00:00+00:00[UTC]",
          "to": "2026-03-05T00:00:00+00:00[UTC]",
          "expected": [
            "2026-02-01T09:00:00+00:00[UTC]",
            "2026-02-02T09:00:00+00:00[UTC]",
            "2026-02-03T09:00:00+00:00[UTC]",
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]",
            "2026-03-03T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_last_day",
          "expression": "every month on the last day at 09:00 in UTC",
          "from": "2026-01-15T00:00:00+00:00[UTC]",
          "to": "2026-04-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-01-31T09:00:00+00:00[UTC]",
            "2026-02-28T09:00:00+00:00[UTC]",
            "2026-03-31T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_last_weekday",
          "expression": "every month on the last weekday at 17:00 in UTC",
          "from": "2026-01-15T00:00:00+00:00[UTC]",
          "to": "2026-04-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-01-30T17:00:00+00:00[UTC]",
            "2026-02-27T17:00:00+00:00[UTC]",
            "2026-03-31T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_nearest_weekday",
          "expression": "every month on the nearest weekday to 15th at 09:00 in UTC",
          "from": "2026-02-01T00:00:00+00:00[UTC]",
          "to": "2026-05-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-02-16T09:00:00+00:00[UTC]",
            "2026-03-16T09:00:00+00:00[UTC]",
            "2026-04-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "every_n_months",
          "expression": "every 2 months on the 1st at 09:00 starting 2026-01-01 in UTC",
          "from": "2026-01-01T00:00:00+00:00[UTC]",
          "to": "2026-07-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-01-01T09:00:00+00:00[UTC]",
            "2026-03-01T09:00:00+00:00[UTC]",
            "2026-05-01T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_first_monday",
          "expression": "every month on the first monday at 09:00 in UTC",
          "from": "2026-01-01T00:00:00+00:00[UTC]",
          "to": "2026-04-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-01-05T09:00:00+00:00[UTC]",
            "2026-02-02T09:00:00+00:00[UTC]",
            "2026-03-02T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_last_friday",
          "expression": "every month on the last friday at 17:00 in UTC",
          "from": "2026-01-01T00:00:00+00:00[UTC]",
          "to": "2026-04-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-01-30T17:00:00+00:00[UTC]",
            "2026-02-27T17:00:00+00:00[UTC]",
            "2026-03-27T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "ordinal_every_n_months",
          "expression": "every 2 months on the second tuesday at 10:00 starting 2026-01-01 in UTC",
          "from": "2026-01-01T00:00:00+00:00[UTC]",
          "to": "2026-06-01T00:00:00+00:00[UTC]",
          "expected": [
            "2026-01-13T10:00:00+00:00[UTC]",
            "2026-03-10T10:00:00+00:00[UTC]",
            "2026-05-12T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "yearly_date",
          "expression": "every year on dec 25 at 00:00 in UTC",
          "from": "2025-01-01T00:00:00+00:00[UTC]",
          "to": "2028-01-01T00:00:00+00:00[UTC]",
          "expected": [
            "2025-12-25T00:00:00+00:00[UTC]",
            "2026-12-25T00:00:00+00:00[UTC]",
            "2027-12-25T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "yearly_ordinal_weekday",
          "expression": "every year on the first monday of march at 10:00 in UTC",
          "from": "2025-01-01T00:00:00+00:00[UTC]",
          "to": "2028-01-01T00:00:00+00:00[UTC]",
          "expected": [
            "2025-03-03T10:00:00+00:00[UTC]",
            "2026-03-02T10:00:00+00:00[UTC]",
            "2027-03-01T10:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "yearly_last_weekday",
          "expression": "every year on the last weekday of december at 17:00 in UTC",
          "from": "2025-01-01T00:00:00+00:00[UTC]",
          "to": "2028-01-01T00:00:00+00:00[UTC]",
          "expected": [
            "2025-12-31T17:00:00+00:00[UTC]",
            "2026-12-31T17:00:00+00:00[UTC]",
            "2027-12-31T17:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "single_occurrence_in_range",
          "expression": "on 2026-02-14 at 14:00 in UTC",
          "from": "2026-02-01T00:00:00+00:00[UTC]",
          "to": "2026-02-28T23:59:00+00:00[UTC]",
          "expected": [
            "2026-02-14T14:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "single_occurrence_out_of_range",
          "expression": "on 2026-03-01 at 14:00 in UTC",
          "from": "2026-02-01T00:00:00+00:00[UTC]",
          "to": "2026-02-28T23:59:00+00:00[UTC]",
          "expected": []
        },
        {
          "name": "with_until_clause",
          "expression": "every day at 09:00 until 2026-02-10 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-15T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_except_named",
          "expression": "every day at 09:00 except feb 9 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-11T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-10T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_except_iso",
          "expression": "every day at 09:00 except 2026-02-09, 2026-02-10 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-12T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-07T09:00:00+00:00[UTC]",
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "with_during_clause",
          "expression": "every day at 09:00 during jan, mar in UTC",
          "from": "2026-01-15T00:00:00+00:00[UTC]",
          "to": "2026-04-15T00:00:00+00:00[UTC]",
          "expected_count": 48,
          "description": "Jan 15-31 (17 days at 09:00 after 00:00) + Mar 1-31 (31 days) = 48 occurrences"
        },
        {
          "name": "with_starting_clause",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-02-09 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-03-15T00:00:00+00:00[UTC]",
          "expected": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-23T09:00:00+00:00[UTC]",
            "2026-03-09T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "combined_clauses",
          "expression": "every weekday at 09:00 except feb 10 until 2026-02-13 during feb in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-28T00:00:00+00:00[UTC]",
          "expected": [
            "2026-02-09T09:00:00+00:00[UTC]",
            "2026-02-11T09:00:00+00:00[UTC]",
            "2026-02-12T09:00:00+00:00[UTC]",
            "2026-02-13T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "boundary_inclusive_to",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-06T00:00:00+00:00[UTC]",
          "to": "2026-02-07T09:00:00+00:00[UTC]",
          "expected": [
            "2026-02-06T09:00:00+00:00[UTC]",
            "2026-02-07T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "boundary_exclusive_from",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-07T09:00:00+00:00[UTC]",
          "to": "2026-02-09T09:00:00+00:00[UTC]",
          "expected": [
            "2026-02-08T09:00:00+00:00[UTC]",
            "2026-02-09T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "empty_range_same_time",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-07T09:00:00+00:00[UTC]",
          "to": "2026-02-07T09:00:00+00:00[UTC]",
          "expected": []
        },
        {
          "name": "empty_range_no_occurrence",
          "expression": "every day at 09:00 in UTC",
          "from": "2026-02-06T12:00:00+00:00[UTC]",
          "to": "2026-02-06T13:00:00+00:00[UTC]",
          "expected": []
        },
        {
          "name": "same_day_range",
          "expression": "every 30 min from 09:00 to 17:00 in UTC",
          "from": "2026-02-06T10:00:00+00:00[UTC]",
          "to": "2026-02-06T12:00:00+00:00[UTC]",
          "expected": [
            "2026-02-06T10:30:00+00:00[UTC]",
            "2026-02-06T11:00:00+00:00[UTC]",
            "2026-02-06T11:30:00+00:00[UTC]",
            "2026-02-06T12:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "cross_year_range",
          "expression": "every month on the 15th at 09:00 in UTC",
          "from": "2025-11-01T00:00:00+00:00[UTC]",
          "to": "2026-03-01T00:00:00+00:00[UTC]",
          "expected": [
            "2025-11-15T09:00:00+00:00[UTC]",
            "2025-12-15T09:00:00+00:00[UTC]",
            "2026-01-15T09:00:00+00:00[UTC]",
            "2026-02-15T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "dst_spring_forward",
          "expression": "every day at 02:30 in America/New_York",
          "from": "2026-03-07T00:00:00-05:00[America/New_York]",
          "to": "2026-03-10T00:00:00-04:00[America/New_York]",
          "description": "Mar 8, 2026 2:00 AM springs forward to 3:00 AM - 02:30 shifts to 03:30",
          "expected": [
            "2026-03-07T02:30:00-05:00[America/New_York]",
            "2026-03-08T03:30:00-04:00[America/New_York]",
            "2026-03-09T02:30:00-04:00[America/New_York]"
          ]
        },
        {
          "name": "dst_fall_back",
          "expression": "every day at 01:30 in America/New_York",
          "from": "2026-10-31T00:00:00-04:00[America/New_York]",
          "to": "2026-11-03T00:00:00-05:00[America/New_York]",
          "description": "Nov 1, 2026 2:00 AM falls back to 1:00 AM - 01:30 occurs twice but we take first",
          "expected": [
            "2026-10-31T01:30:00-04:00[America/New_York]",
            "2026-11-01T01:30:00-04:00[America/New_York]",
            "2026-11-02T01:30:00-05:00[America/New_York]"
          ]
        },
        {
          "name": "timezone_different_from_utc",
          "expression": "every day at 09:00 in Asia/Tokyo",
          "from": "2026-02-06T00:00:00+09:00[Asia/Tokyo]",
          "to": "2026-02-08T12:00:00+09:00[Asia/Tokyo]",
          "expected": [
            "2026-02-06T09:00:00+09:00[Asia/Tokyo]",
            "2026-02-07T09:00:00+09:00[Asia/Tokyo]",
            "2026-02-08T09:00:00+09:00[Asia/Tokyo]"
          ]
        }
      ]
    },
    "previous_from": {
      "description": "Tests for previousFrom() - find most recent occurrence strictly before now",
      "tests": [
        {
          "name": "daily_basic",
          "expression": "every day at 09:00 in UTC",
          "now": "2026-02-06T12:00:00+00:00[UTC]",
          "expected": "2026-02-06T09:00:00+00:00[UTC]",
          "description": "Same day, time already passed"
        },
        {
          "name": "daily_before_time",
          "expression": "every day at 09:00 in UTC",
          "now": "2026-02-06T08:00:00+00:00[UTC]",
          "expected": "2026-02-05T09:00:00+00:00[UTC]",
          "description": "Before today's occurrence, return yesterday"
        },
        {
          "name": "daily_exact_match",
          "expression": "every day at 09:00 in UTC",
          "now": "2026-02-06T09:00:00+00:00[UTC]",
          "expected": "2026-02-05T09:00:00+00:00[UTC]",
          "description": "Exactly on occurrence time returns previous (strictly before)"
        },
        {
          "name": "weekday_from_monday",
          "expression": "every weekday at 09:00 in UTC",
          "now": "2026-02-09T12:00:00+00:00[UTC]",
          "expected": "2026-02-09T09:00:00+00:00[UTC]",
          "description": "Monday after 09:00, previous is same day 09:00"
        },
        {
          "name": "weekday_from_saturday",
          "expression": "every weekday at 09:00 in UTC",
          "now": "2026-02-07T12:00:00+00:00[UTC]",
          "expected": "2026-02-06T09:00:00+00:00[UTC]",
          "description": "Saturday, previous weekday is Friday"
        },
        {
          "name": "weekday_from_sunday",
          "expression": "every weekday at 09:00 in UTC",
          "now": "2026-02-08T12:00:00+00:00[UTC]",
          "expected": "2026-02-06T09:00:00+00:00[UTC]",
          "description": "Sunday, previous weekday is Friday"
        },
        {
          "name": "weekend_from_monday",
          "expression": "every weekend at 10:00 in UTC",
          "now": "2026-02-09T12:00:00+00:00[UTC]",
          "expected": "2026-02-08T10:00:00+00:00[UTC]",
          "description": "Monday, previous weekend is Sunday"
        },
        {
          "name": "interval_hours",
          "expression": "every 2 hours from 09:00 to 17:00 in UTC",
          "now": "2026-02-06T14:00:00+00:00[UTC]",
          "expected": "2026-02-06T13:00:00+00:00[UTC]",
          "description": "Between interval times, return previous slot"
        },
        {
          "name": "interval_before_window",
          "expression": "every 2 hours from 09:00 to 17:00 in UTC",
          "now": "2026-02-06T08:00:00+00:00[UTC]",
          "expected": "2026-02-05T17:00:00+00:00[UTC]",
          "description": "Before today's window, return last slot yesterday"
        },
        {
          "name": "interval_after_window",
          "expression": "every 2 hours from 09:00 to 17:00 in UTC",
          "now": "2026-02-06T20:00:00+00:00[UTC]",
          "expected": "2026-02-06T17:00:00+00:00[UTC]",
          "description": "After today's window, return last slot today"
        },
        {
          "name": "interval_minutes",
          "expression": "every 30 min from 09:00 to 10:00 in UTC",
          "now": "2026-02-06T09:45:00+00:00[UTC]",
          "expected": "2026-02-06T09:30:00+00:00[UTC]",
          "description": "Between minute intervals"
        },
        {
          "name": "weekly_single_day",
          "expression": "every monday at 09:00 in UTC",
          "now": "2026-02-11T12:00:00+00:00[UTC]",
          "expected": "2026-02-09T09:00:00+00:00[UTC]",
          "description": "Wednesday, previous Monday"
        },
        {
          "name": "weekly_same_day_after",
          "expression": "every monday at 09:00 in UTC",
          "now": "2026-02-09T12:00:00+00:00[UTC]",
          "expected": "2026-02-09T09:00:00+00:00[UTC]",
          "description": "Monday after 09:00, previous is same day"
        },
        {
          "name": "weekly_same_day_before",
          "expression": "every monday at 09:00 in UTC",
          "now": "2026-02-09T08:00:00+00:00[UTC]",
          "expected": "2026-02-02T09:00:00+00:00[UTC]",
          "description": "Monday before 09:00, previous is last Monday"
        },
        {
          "name": "biweekly_with_anchor",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-02-02 in UTC",
          "now": "2026-02-20T12:00:00+00:00[UTC]",
          "expected": "2026-02-16T09:00:00+00:00[UTC]",
          "description": "Between biweekly occurrences"
        },
        {
          "name": "biweekly_before_anchor",
          "expression": "every 2 weeks on monday at 09:00 starting 2026-02-16 in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": null,
          "description": "Before starting anchor, no previous occurrence"
        },
        {
          "name": "monthly_15th",
          "expression": "every month on the 15th at 09:00 in UTC",
          "now": "2026-02-20T12:00:00+00:00[UTC]",
          "expected": "2026-02-15T09:00:00+00:00[UTC]",
          "description": "After this month's occurrence"
        },
        {
          "name": "monthly_before_day",
          "expression": "every month on the 15th at 09:00 in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": "2026-01-15T09:00:00+00:00[UTC]",
          "description": "Before this month's occurrence"
        },
        {
          "name": "monthly_last_day",
          "expression": "every month on the last day at 09:00 in UTC",
          "now": "2026-03-15T12:00:00+00:00[UTC]",
          "expected": "2026-02-28T09:00:00+00:00[UTC]",
          "description": "Previous last day (Feb has 28 days in 2026)"
        },
        {
          "name": "monthly_day_range",
          "expression": "every month on the 1st to 3rd at 09:00 in UTC",
          "now": "2026-02-02T12:00:00+00:00[UTC]",
          "expected": "2026-02-02T09:00:00+00:00[UTC]",
          "description": "Within day range, return same day"
        },
        {
          "name": "ordinal_first_monday",
          "expression": "every month on the first monday at 09:00 in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": "2026-02-02T09:00:00+00:00[UTC]",
          "description": "After first Monday of Feb"
        },
        {
          "name": "ordinal_first_monday_same_day",
          "expression": "every month on the first monday at 09:00 in UTC",
          "now": "2026-02-02T12:00:00+00:00[UTC]",
          "expected": "2026-02-02T09:00:00+00:00[UTC]",
          "description": "On first Monday after 09:00"
        },
        {
          "name": "ordinal_first_monday_before",
          "expression": "every month on the first monday at 09:00 in UTC",
          "now": "2026-02-02T08:00:00+00:00[UTC]",
          "expected": "2026-01-05T09:00:00+00:00[UTC]",
          "description": "On first Monday before 09:00, return last month"
        },
        {
          "name": "ordinal_last_friday",
          "expression": "every month on the last friday at 17:00 in UTC",
          "now": "2026-03-01T12:00:00+00:00[UTC]",
          "expected": "2026-02-27T17:00:00+00:00[UTC]",
          "description": "Previous last Friday"
        },
        {
          "name": "yearly_date",
          "expression": "every year on dec 25 at 00:00 in UTC",
          "now": "2026-06-01T12:00:00+00:00[UTC]",
          "expected": "2025-12-25T00:00:00+00:00[UTC]",
          "description": "Previous Christmas"
        },
        {
          "name": "yearly_ordinal",
          "expression": "every year on the first monday of march at 10:00 in UTC",
          "now": "2026-04-01T12:00:00+00:00[UTC]",
          "expected": "2026-03-02T10:00:00+00:00[UTC]",
          "description": "Previous first Monday of March"
        },
        {
          "name": "single_date_after",
          "expression": "on 2026-02-14 at 14:00 in UTC",
          "now": "2026-02-15T12:00:00+00:00[UTC]",
          "expected": "2026-02-14T14:00:00+00:00[UTC]",
          "description": "After single date, returns that date"
        },
        {
          "name": "single_date_before",
          "expression": "on 2026-02-14 at 14:00 in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": null,
          "description": "Before single date, no previous occurrence"
        },
        {
          "name": "single_date_exact",
          "expression": "on 2026-02-14 at 14:00 in UTC",
          "now": "2026-02-14T14:00:00+00:00[UTC]",
          "expected": null,
          "description": "Exactly on single date time, no previous (strictly before)"
        },
        {
          "name": "single_date_same_day_after",
          "expression": "on 2026-02-14 at 14:00 in UTC",
          "now": "2026-02-14T16:00:00+00:00[UTC]",
          "expected": "2026-02-14T14:00:00+00:00[UTC]",
          "description": "Same day after the time"
        },
        {
          "name": "with_starting_clause",
          "expression": "every day at 09:00 starting 2026-02-10 in UTC",
          "now": "2026-02-12T12:00:00+00:00[UTC]",
          "expected": "2026-02-12T09:00:00+00:00[UTC]",
          "description": "After starting, normal behavior"
        },
        {
          "name": "with_starting_clause_boundary",
          "expression": "every day at 09:00 starting 2026-02-10 in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": "2026-02-10T09:00:00+00:00[UTC]",
          "description": "On starting day after time"
        },
        {
          "name": "with_starting_clause_before",
          "expression": "every day at 09:00 starting 2026-02-10 in UTC",
          "now": "2026-02-08T12:00:00+00:00[UTC]",
          "expected": null,
          "description": "Before starting date, no previous"
        },
        {
          "name": "with_starting_clause_on_day_before_time",
          "expression": "every day at 09:00 starting 2026-02-10 in UTC",
          "now": "2026-02-10T08:00:00+00:00[UTC]",
          "expected": null,
          "description": "On starting day before time, no previous"
        },
        {
          "name": "with_until_clause",
          "expression": "every day at 09:00 until 2026-02-20 in UTC",
          "now": "2026-02-15T12:00:00+00:00[UTC]",
          "expected": "2026-02-15T09:00:00+00:00[UTC]",
          "description": "Before until date, normal behavior"
        },
        {
          "name": "with_until_clause_after",
          "expression": "every day at 09:00 until 2026-02-10 in UTC",
          "now": "2026-02-15T12:00:00+00:00[UTC]",
          "expected": "2026-02-10T09:00:00+00:00[UTC]",
          "description": "After until date, returns last valid occurrence"
        },
        {
          "name": "with_except_clause",
          "expression": "every day at 09:00 except feb 9, feb 10 in UTC",
          "now": "2026-02-11T12:00:00+00:00[UTC]",
          "expected": "2026-02-11T09:00:00+00:00[UTC]",
          "description": "Feb 11 is not excepted"
        },
        {
          "name": "with_except_clause_on_excepted",
          "expression": "every day at 09:00 except feb 9, feb 10 in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": "2026-02-08T09:00:00+00:00[UTC]",
          "description": "On excepted date, skips to Feb 8"
        },
        {
          "name": "with_except_clause_before_excepted",
          "expression": "every day at 09:00 except feb 9, feb 10 in UTC",
          "now": "2026-02-09T08:00:00+00:00[UTC]",
          "expected": "2026-02-08T09:00:00+00:00[UTC]",
          "description": "Before Feb 9 09:00, skips excepted dates"
        },
        {
          "name": "with_during_clause",
          "expression": "every day at 09:00 during jan, mar in UTC",
          "now": "2026-02-15T12:00:00+00:00[UTC]",
          "expected": "2026-01-31T09:00:00+00:00[UTC]",
          "description": "In February, previous is end of January"
        },
        {
          "name": "with_during_clause_in_valid_month",
          "expression": "every day at 09:00 during jan, mar in UTC",
          "now": "2026-03-15T12:00:00+00:00[UTC]",
          "expected": "2026-03-15T09:00:00+00:00[UTC]",
          "description": "In March, normal behavior"
        },
        {
          "name": "combined_clauses",
          "expression": "every weekday at 09:00 except feb 10 until 2026-02-13 during feb in UTC",
          "now": "2026-02-12T12:00:00+00:00[UTC]",
          "expected": "2026-02-12T09:00:00+00:00[UTC]",
          "description": "Combined clauses, Feb 12 is valid"
        },
        {
          "name": "combined_clauses_excepted",
          "expression": "every weekday at 09:00 except feb 10 until 2026-02-13 during feb in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": "2026-02-09T09:00:00+00:00[UTC]",
          "description": "Feb 10 excepted, returns Feb 9"
        },
        {
          "name": "multiple_times_per_day",
          "expression": "every day at 09:00, 12:00, 17:00 in UTC",
          "now": "2026-02-06T14:00:00+00:00[UTC]",
          "expected": "2026-02-06T12:00:00+00:00[UTC]",
          "description": "Between times, return most recent"
        },
        {
          "name": "multiple_times_before_first",
          "expression": "every day at 09:00, 12:00, 17:00 in UTC",
          "now": "2026-02-06T08:00:00+00:00[UTC]",
          "expected": "2026-02-05T17:00:00+00:00[UTC]",
          "description": "Before first time, return last time yesterday"
        },
        {
          "name": "multiple_times_after_last",
          "expression": "every day at 09:00, 12:00, 17:00 in UTC",
          "now": "2026-02-06T20:00:00+00:00[UTC]",
          "expected": "2026-02-06T17:00:00+00:00[UTC]",
          "description": "After last time, return last time today"
        },
        {
          "name": "timezone_new_york",
          "expression": "every day at 09:00 in America/New_York",
          "now": "2026-02-06T15:00:00-05:00[America/New_York]",
          "expected": "2026-02-06T09:00:00-05:00[America/New_York]",
          "description": "Different timezone"
        },
        {
          "name": "timezone_tokyo",
          "expression": "every day at 09:00 in Asia/Tokyo",
          "now": "2026-02-06T15:00:00+09:00[Asia/Tokyo]",
          "expected": "2026-02-06T09:00:00+09:00[Asia/Tokyo]",
          "description": "Tokyo timezone"
        },
        {
          "name": "dst_spring_forward",
          "expression": "every day at 02:30 in America/New_York",
          "now": "2026-03-08T12:00:00-04:00[America/New_York]",
          "expected": "2026-03-08T03:30:00-04:00[America/New_York]",
          "description": "On DST spring forward day, 02:30 shifts to 03:30"
        },
        {
          "name": "dst_fall_back",
          "expression": "every day at 01:30 in America/New_York",
          "now": "2026-11-02T12:00:00-05:00[America/New_York]",
          "expected": "2026-11-02T01:30:00-05:00[America/New_York]",
          "description": "After DST fall back"
        },
        {
          "name": "every_n_days",
          "expression": "every 3 days at 09:00 starting 2026-02-01 in UTC",
          "now": "2026-02-08T12:00:00+00:00[UTC]",
          "expected": "2026-02-07T09:00:00+00:00[UTC]",
          "description": "Every 3 days, anchored Feb 1"
        },
        {
          "name": "every_n_months",
          "expression": "every 2 months on the 1st at 09:00 starting 2026-01-01 in UTC",
          "now": "2026-04-15T12:00:00+00:00[UTC]",
          "expected": "2026-03-01T09:00:00+00:00[UTC]",
          "description": "Every 2 months, previous is March"
        },
        {
          "name": "nearest_weekday",
          "expression": "every month on the nearest weekday to 15th at 09:00 in UTC",
          "now": "2026-02-20T12:00:00+00:00[UTC]",
          "expected": "2026-02-16T09:00:00+00:00[UTC]",
          "description": "Feb 15 is Sunday, nearest weekday is 16th"
        },
        {
          "name": "last_weekday_of_month",
          "expression": "every month on the last weekday at 17:00 in UTC",
          "now": "2026-03-01T12:00:00+00:00[UTC]",
          "expected": "2026-02-27T17:00:00+00:00[UTC]",
          "description": "Last weekday of Feb is 27th (Friday)"
        },
        {
          "name": "yearly_day_of_month",
          "expression": "every year on the 15th of march at 09:00 in UTC",
          "now": "2026-06-01T12:00:00+00:00[UTC]",
          "expected": "2026-03-15T09:00:00+00:00[UTC]",
          "description": "YearRepeat with DayOfMonth target, after target month"
        },
        {
          "name": "yearly_day_of_month_before_time",
          "expression": "every year on the 15th of march at 09:00 in UTC",
          "now": "2026-03-15T08:00:00+00:00[UTC]",
          "expected": "2025-03-15T09:00:00+00:00[UTC]",
          "description": "YearRepeat with DayOfMonth target, on day but before time goes to previous year"
        },
        {
          "name": "yearly_day_of_month_after_time",
          "expression": "every year on the 15th of march at 09:00 in UTC",
          "now": "2026-03-15T12:00:00+00:00[UTC]",
          "expected": "2026-03-15T09:00:00+00:00[UTC]",
          "description": "YearRepeat with DayOfMonth target, on day after time returns same day"
        },
        {
          "name": "yearly_last_weekday",
          "expression": "every year on the last weekday of december at 17:00 in UTC",
          "now": "2027-01-15T12:00:00+00:00[UTC]",
          "expected": "2026-12-31T17:00:00+00:00[UTC]",
          "description": "YearRepeat with LastWeekday target, Dec 31 2026 is Thursday"
        },
        {
          "name": "yearly_last_weekday_before_time",
          "expression": "every year on the last weekday of december at 17:00 in UTC",
          "now": "2026-12-31T12:00:00+00:00[UTC]",
          "expected": "2025-12-31T17:00:00+00:00[UTC]",
          "description": "YearRepeat with LastWeekday target, on day before time goes to previous year"
        },
        {
          "name": "every_n_years",
          "expression": "every 2 years on dec 25 at 00:00 starting 2024-01-01 in UTC",
          "now": "2027-01-01T12:00:00+00:00[UTC]",
          "expected": "2026-12-25T00:00:00+00:00[UTC]",
          "description": "YearRepeat with interval 2, aligned years are 2024, 2026, 2028..."
        },
        {
          "name": "every_n_years_skip",
          "expression": "every 2 years on dec 25 at 00:00 starting 2024-01-01 in UTC",
          "now": "2025-01-01T12:00:00+00:00[UTC]",
          "expected": "2024-12-25T00:00:00+00:00[UTC]",
          "description": "YearRepeat with interval 2, 2025 is non-aligned so skips to 2024"
        },
        {
          "name": "nearest_weekday_next_direction",
          "expression": "every month on the next nearest weekday to 15th at 09:00 in UTC",
          "now": "2026-02-20T12:00:00+00:00[UTC]",
          "expected": "2026-02-16T09:00:00+00:00[UTC]",
          "description": "Directional nearest weekday (next): Feb 15 is Sunday, next weekday is Monday 16th"
        },
        {
          "name": "nearest_weekday_previous_direction",
          "expression": "every month on the previous nearest weekday to 15th at 09:00 in UTC",
          "now": "2026-02-20T12:00:00+00:00[UTC]",
          "expected": "2026-02-13T09:00:00+00:00[UTC]",
          "description": "Directional nearest weekday (previous): Feb 15 is Sunday, previous weekday is Friday 13th"
        },
        {
          "name": "nearest_weekday_next_cross_month",
          "expression": "every month on the next nearest weekday to 1st at 09:00 in UTC",
          "now": "2026-02-10T12:00:00+00:00[UTC]",
          "expected": "2026-02-02T09:00:00+00:00[UTC]",
          "description": "Directional nearest weekday (next) on 1st: Feb 1 is Sunday, next weekday is Monday 2nd"
        }
      ]
    },
    "contradictory": {
      "description": "Schedules with mutually exclusive constraints that can never produce occurrences. All must parse successfully but return empty results  the contradiction is a semantic property, not a syntax error.",
      "tests": [
        {
          "name": "until_before_starting",
          "expression": "every day at 09:00 until 2025-01-01 starting 2026-01-01 in UTC",
          "description": "until date precedes starting date: time window is empty, no occurrences possible",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "until_in_past",
          "expression": "every day at 09:00 until 2020-01-01 in UTC",
          "description": "until date is in the past relative to now: schedule has expired",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "monthly_31st_during_feb",
          "expression": "every month on the 31st at 09:00 during feb in UTC",
          "description": "31st of month restricted to February: Feb never has 31 days",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "monthly_30th_during_feb",
          "expression": "every month on the 30th at 09:00 during feb in UTC",
          "description": "30th of month restricted to February: Feb never has 30 days",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "until_before_starting_weekly",
          "expression": "every 2 weeks on monday at 09:00 until 2025-06-01 starting 2026-01-05 in UTC",
          "description": "biweekly with until before starting: different expression type, same empty result",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "until_before_starting_monthly",
          "expression": "every month on the 1st at 09:00 until 2025-06-01 starting 2026-01-01 in UTC",
          "description": "monthly with until before starting: empty time window",
          "next_n_count": 3,
          "next_n": []
        },
        {
          "name": "until_before_starting_yearly",
          "expression": "every year on jan 1 at 00:00 until 2025-01-01 starting 2026-01-01 in UTC",
          "description": "yearly with until before starting: empty time window",
          "next_n_count": 3,
          "next_n": []
        }
      ]
    },
    "edge_cases": {
      "description": "Edge cases for midnight boundaries, large intervals, and end-of-month cascading. These stress interactions between skip logic, interval alignment, and day boundaries.",
      "tests": [
        {
          "name": "midnight_exact_boundary",
          "expression": "every day at 00:00 in UTC",
          "now": "2026-02-06T00:00:00+00:00[UTC]",
          "description": "now is exactly midnight: strict > means this midnight is skipped, next is tomorrow",
          "next_n": [
            "2026-02-07T00:00:00+00:00[UTC]",
            "2026-02-08T00:00:00+00:00[UTC]",
            "2026-02-09T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "midnight_one_second_before",
          "expression": "every day at 00:00 in UTC",
          "now": "2026-02-06T23:59:59+00:00[UTC]",
          "description": "now is 23:59:59: next midnight is 1 second away",
          "next": "2026-02-07T00:00:00+00:00[UTC]"
        },
        {
          "name": "midnight_weekday_friday",
          "expression": "every weekday at 00:00 in UTC",
          "now": "2026-02-06T00:00:00+00:00[UTC]",
          "description": "Friday midnight exactly: strict > skips Friday, Sat/Sun skipped, next is Monday",
          "next_n": [
            "2026-02-09T00:00:00+00:00[UTC]",
            "2026-02-10T00:00:00+00:00[UTC]",
            "2026-02-11T00:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "midnight_multi_time",
          "expression": "every day at 00:00, 12:00 in UTC",
          "now": "2026-02-06T00:00:00+00:00[UTC]",
          "description": "multi-time with midnight: midnight skipped by strict >, next is noon same day",
          "next_n": [
            "2026-02-06T12:00:00+00:00[UTC]",
            "2026-02-07T00:00:00+00:00[UTC]",
            "2026-02-07T12:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "large_day_interval_365",
          "expression": "every 365 days at 09:00 starting 2020-01-01 in UTC",
          "description": "365-day interval from anchor: drifts relative to calendar years due to leap years",
          "next_n": [
            "2026-12-30T09:00:00+00:00[UTC]",
            "2027-12-30T09:00:00+00:00[UTC]",
            "2028-12-29T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "large_week_interval_52",
          "expression": "every 52 weeks on monday at 09:00 starting 2020-01-06 in UTC",
          "description": "52-week interval (364 days): drifts ~1 day/year relative to calendar",
          "next_n": [
            "2026-12-28T09:00:00+00:00[UTC]",
            "2027-12-27T09:00:00+00:00[UTC]",
            "2028-12-25T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "large_month_interval_24",
          "expression": "every 24 months on the 1st at 09:00 starting 2020-01-01 in UTC",
          "description": "24-month (2-year) interval: Jan 2026 is aligned but past, next is Jan 2028",
          "next_n": [
            "2028-01-01T09:00:00+00:00[UTC]",
            "2030-01-01T09:00:00+00:00[UTC]",
            "2032-01-01T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "bimonthly_31st_skip_short_months",
          "expression": "every 2 months on the 31st at 09:00 in UTC",
          "description": "every 2 months on 31st: aligned months are Jan/Mar/May/Jul/Sep/Nov, but Sep and Nov have 30 days so they are skipped",
          "next_n_count": 6,
          "next_n": [
            "2026-03-31T09:00:00+00:00[UTC]",
            "2026-05-31T09:00:00+00:00[UTC]",
            "2026-07-31T09:00:00+00:00[UTC]",
            "2027-01-31T09:00:00+00:00[UTC]",
            "2027-03-31T09:00:00+00:00[UTC]",
            "2027-05-31T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "quarterly_29th",
          "expression": "every 3 months on the 29th at 09:00 starting 2026-01-01 in UTC",
          "description": "quarterly on 29th from Jan anchor: aligned months are Jan/Apr/Jul/Oct  all have 29+ days",
          "next_n_count": 5,
          "next_n": [
            "2026-04-29T09:00:00+00:00[UTC]",
            "2026-07-29T09:00:00+00:00[UTC]",
            "2026-10-29T09:00:00+00:00[UTC]",
            "2027-01-29T09:00:00+00:00[UTC]",
            "2027-04-29T09:00:00+00:00[UTC]"
          ]
        },
        {
          "name": "monthly_29th_skip_non_leap_feb",
          "expression": "every month on the 29th at 09:00 in UTC",
          "description": "monthly on 29th: fires every month except non-leap February (2026 and 2027 are not leap years)",
          "next_n_count": 14,
          "next_n": [
            "2026-03-29T09:00:00+00:00[UTC]",
            "2026-04-29T09:00:00+00:00[UTC]",
            "2026-05-29T09:00:00+00:00[UTC]",
            "2026-06-29T09:00:00+00:00[UTC]",
            "2026-07-29T09:00:00+00:00[UTC]",
            "2026-08-29T09:00:00+00:00[UTC]",
            "2026-09-29T09:00:00+00:00[UTC]",
            "2026-10-29T09:00:00+00:00[UTC]",
            "2026-11-29T09:00:00+00:00[UTC]",
            "2026-12-29T09:00:00+00:00[UTC]",
            "2027-01-29T09:00:00+00:00[UTC]",
            "2027-03-29T09:00:00+00:00[UTC]",
            "2027-04-29T09:00:00+00:00[UTC]",
            "2027-05-29T09:00:00+00:00[UTC]"
          ]
        }
      ]
    }
  },
  "cron": {
    "to_cron": {
      "description": "hron expression to 5-field cron string.",
      "tests": [
        {
          "name": "every_day",
          "hron": "every day at 9:00",
          "cron": "0 9 * * *"
        },
        {
          "name": "weekday",
          "hron": "every weekday at 9:00",
          "cron": "0 9 * * 1-5"
        },
        {
          "name": "weekend",
          "hron": "every weekend at 10:00",
          "cron": "0 10 * * 0,6"
        },
        {
          "name": "monday",
          "hron": "every monday at 9:00",
          "cron": "0 9 * * 1"
        },
        {
          "name": "friday",
          "hron": "every friday at 17:00",
          "cron": "0 17 * * 5"
        },
        {
          "name": "mon_wed_fri",
          "hron": "every mon, wed, fri at 9:00",
          "cron": "0 9 * * 1,3,5"
        },
        {
          "name": "tue_thu",
          "hron": "every tue, thu at 14:00",
          "cron": "0 14 * * 2,4"
        },
        {
          "name": "sunday",
          "hron": "every sunday at 08:00",
          "cron": "0 8 * * 0"
        },
        {
          "name": "saturday",
          "hron": "every saturday at 10:00",
          "cron": "0 10 * * 6"
        },
        {
          "name": "30min_full_day",
          "hron": "every 30 min from 00:00 to 23:59",
          "cron": "*/30 * * * *"
        },
        {
          "name": "15min_full_day",
          "hron": "every 15 min from 00:00 to 23:59",
          "cron": "*/15 * * * *"
        },
        {
          "name": "2hr_full_day",
          "hron": "every 2 hours from 00:00 to 23:59",
          "cron": "0 */2 * * *"
        },
        {
          "name": "1hr_full_day",
          "hron": "every 1 hour from 00:00 to 23:59",
          "cron": "0 */1 * * *"
        },
        {
          "name": "month_1st",
          "hron": "every month on the 1st at 9:00",
          "cron": "0 9 1 * *"
        },
        {
          "name": "month_15th",
          "hron": "every month on the 15th at 9:00",
          "cron": "0 9 15 * *"
        },
        {
          "name": "month_1st_15th",
          "hron": "every month on the 1st, 15th at 9:00",
          "cron": "0 9 1,15 * *"
        },
        {
          "name": "month_midnight",
          "hron": "every month on the 1st at 00:00",
          "cron": "0 0 1 * *"
        },
        {
          "name": "day_range_1_to_5",
          "hron": "every month on the 1st to 5th at 9:00",
          "cron": "0 9 1,2,3,4,5 * *"
        },
        {
          "name": "day_range_mixed",
          "hron": "every month on the 1st to 3rd, 15th at 9:00",
          "cron": "0 9 1,2,3,15 * *"
        },
        {
          "name": "day_range_10_to_15",
          "hron": "every month on the 10th to 15th at 12:00",
          "cron": "0 12 10,11,12,13,14,15 * *"
        },
        {
          "name": "nearest_weekday",
          "hron": "every month on the nearest weekday to 15th at 09:00",
          "cron": "0 9 15W * *"
        }
      ]
    },
    "to_cron_errors": {
      "description": "Expressions that cannot be converted to cron.",
      "tests": [
        {
          "name": "partial_day_interval",
          "hron": "every 45 min from 09:00 to 17:00",
          "description": "partial-day interval"
        },
        {
          "name": "interval_with_day_filter",
          "hron": "every 45 min from 09:00 to 17:00 on weekdays",
          "description": "interval with day filter"
        },
        {
          "name": "multi_week",
          "hron": "every 2 weeks on monday at 9:00",
          "description": "multi-week interval"
        },
        {
          "name": "last_day",
          "hron": "every month on the last day at 17:00",
          "description": "last day of month"
        },
        {
          "name": "last_weekday",
          "hron": "every month on the last weekday at 15:00",
          "description": "last weekday"
        },
        {
          "name": "ordinal",
          "hron": "every month on the first monday at 10:00",
          "description": "ordinal weekday"
        },
        {
          "name": "ordinal_last",
          "hron": "every month on the last friday at 16:00",
          "description": "ordinal last"
        },
        {
          "name": "yearly",
          "hron": "every year on dec 25 at 00:00",
          "description": "yearly"
        },
        {
          "name": "single_date",
          "hron": "on 2026-03-15 at 14:30",
          "description": "single date"
        },
        {
          "name": "except_clause",
          "hron": "every weekday at 9:00 except dec 25",
          "description": "except clause"
        },
        {
          "name": "until_clause",
          "hron": "every day at 9:00 until 2026-12-31",
          "description": "until clause"
        },
        {
          "name": "multi_time_day",
          "hron": "every day at 9:00, 17:00",
          "description": "multi-time day repeat"
        },
        {
          "name": "multi_time_weekday",
          "hron": "every weekday at 9:00, 17:00",
          "description": "multi-time weekday repeat"
        },
        {
          "name": "multi_time_month",
          "hron": "every month on the 1st at 9:00, 17:00",
          "description": "multi-time month repeat"
        },
        {
          "name": "during_single",
          "hron": "every day at 9:00 during jan",
          "description": "during clause single"
        },
        {
          "name": "during_multiple",
          "hron": "every weekday at 9:00 during jan, jun",
          "description": "during clause multiple"
        },
        {
          "name": "day_range_multi_time",
          "hron": "every month on the 1st to 5th at 9:00, 17:00",
          "description": "day range + multi-time"
        },
        {
          "name": "day_range_during",
          "hron": "every month on the 1st to 5th at 9:00 during jan",
          "description": "day range + during"
        },
        {
          "name": "multi_day_interval",
          "hron": "every 3 days at 09:00",
          "description": "multi-day interval"
        },
        {
          "name": "multi_month_interval",
          "hron": "every 2 months on the 1st at 09:00",
          "description": "multi-month interval"
        },
        {
          "name": "ordinal_interval",
          "hron": "every 2 months on the first monday at 10:00",
          "description": "ordinal with month interval"
        },
        {
          "name": "yearly_interval",
          "hron": "every 2 years on dec 25 at 00:00",
          "description": "yearly interval"
        },
        {
          "name": "next_nearest_weekday_unsupported",
          "hron": "every month on the next nearest weekday to 15th at 09:00",
          "description": "directional nearest weekday not supported in cron"
        },
        {
          "name": "previous_nearest_weekday_unsupported",
          "hron": "every month on the previous nearest weekday to 1st at 09:00",
          "description": "directional nearest weekday not supported in cron"
        }
      ]
    },
    "from_cron": {
      "description": "5-field cron string to hron canonical form.",
      "tests": [
        {
          "name": "every_day",
          "cron": "0 9 * * *",
          "hron": "every day at 09:00"
        },
        {
          "name": "weekday",
          "cron": "0 9 * * 1-5",
          "hron": "every weekday at 09:00"
        },
        {
          "name": "weekend",
          "cron": "0 10 * * 0,6",
          "hron": "every weekend at 10:00"
        },
        {
          "name": "specific_day",
          "cron": "30 14 * * 1",
          "hron": "every monday at 14:30"
        },
        {
          "name": "dow_0_sunday",
          "cron": "0 9 * * 0",
          "hron": "every sunday at 09:00"
        },
        {
          "name": "dow_7_sunday",
          "cron": "0 9 * * 7",
          "hron": "every sunday at 09:00"
        },
        {
          "name": "monthly",
          "cron": "0 9 1 * *",
          "hron": "every month on the 1st at 09:00"
        },
        {
          "name": "monthly_multi_day",
          "cron": "0 9 1,15 * *",
          "hron": "every month on the 1st, 15th at 09:00"
        },
        {
          "name": "interval_minutes",
          "cron": "*/30 * * * *",
          "hron": "every 30 min from 00:00 to 23:59"
        },
        {
          "name": "interval_hours",
          "cron": "0 */2 * * *",
          "hron": "every 2 hours from 00:00 to 23:59"
        },
        {
          "name": "interval_with_hour_range",
          "cron": "*/15 9-17 * * *",
          "hron": "every 15 min from 09:00 to 17:00"
        },
        {
          "name": "multiple_weekdays",
          "cron": "0 9 * * 1,3,5",
          "hron": "every monday, wednesday, friday at 09:00"
        },
        {
          "name": "midnight",
          "cron": "0 0 * * *",
          "hron": "every day at 00:00"
        },
        {
          "name": "dom_range_1_to_5",
          "cron": "0 9 1-5 * *",
          "hron": "every month on the 1st to 5th at 09:00"
        },
        {
          "name": "dom_range_10_to_15",
          "cron": "0 9 10-15 * *",
          "hron": "every month on the 10th to 15th at 09:00"
        },
        {
          "name": "dom_range_last_week",
          "cron": "0 9 25-31 * *",
          "hron": "every month on the 25th to 31st at 09:00"
        },
        {
          "name": "dom_range_mixed",
          "cron": "0 9 1-3,15 * *",
          "hron": "every month on the 1st to 3rd, 15th at 09:00"
        },
        {
          "name": "dom_range_multiple",
          "cron": "0 9 1-3,10-12 * *",
          "hron": "every month on the 1st to 3rd, 10th to 12th at 09:00"
        },
        {
          "name": "dow_range_tue_thu",
          "cron": "0 9 * * 2-4",
          "hron": "every tuesday, wednesday, thursday at 09:00"
        },
        {
          "name": "dow_range_mon_wed",
          "cron": "0 9 * * 1-3",
          "hron": "every monday, tuesday, wednesday at 09:00"
        },
        {
          "name": "dow_range_thu_sat",
          "cron": "0 9 * * 4-6",
          "hron": "every thursday, friday, saturday at 09:00"
        },
        {
          "name": "dow_range_sun_tue",
          "cron": "0 9 * * 0-2",
          "hron": "every sunday, monday, tuesday at 09:00"
        },
        {
          "name": "month_single",
          "cron": "0 9 1 3 *",
          "hron": "every month on the 1st at 09:00 during mar"
        },
        {
          "name": "month_multiple",
          "cron": "0 9 1 1,7 *",
          "hron": "every month on the 1st at 09:00 during jan, jul"
        },
        {
          "name": "month_range",
          "cron": "0 9 1 6-8 *",
          "hron": "every month on the 1st at 09:00 during jun, jul, aug"
        },
        {
          "name": "month_q1",
          "cron": "0 9 * 1-3 1",
          "hron": "every monday at 09:00 during jan, feb, mar"
        },
        {
          "name": "month_with_dom",
          "cron": "0 9 15 12 *",
          "hron": "every month on the 15th at 09:00 during dec"
        },
        {
          "name": "month_with_dow",
          "cron": "0 9 * 6 5",
          "hron": "every friday at 09:00 during jun"
        },
        {
          "name": "month_named_single",
          "cron": "0 9 1 JAN *",
          "hron": "every month on the 1st at 09:00 during jan"
        },
        {
          "name": "month_named_multiple",
          "cron": "0 9 1 JAN,JUL *",
          "hron": "every month on the 1st at 09:00 during jan, jul"
        },
        {
          "name": "month_named_range",
          "cron": "0 9 1 MAR-MAY *",
          "hron": "every month on the 1st at 09:00 during mar, apr, may"
        },
        {
          "name": "month_named_lowercase",
          "cron": "0 9 1 jan,jul *",
          "hron": "every month on the 1st at 09:00 during jan, jul"
        },
        {
          "name": "month_named_mixed_case",
          "cron": "0 9 1 Jan,Jul *",
          "hron": "every month on the 1st at 09:00 during jan, jul"
        },
        {
          "name": "dow_named_single",
          "cron": "0 9 * * MON",
          "hron": "every monday at 09:00"
        },
        {
          "name": "dow_named_multiple",
          "cron": "0 9 * * MON,WED,FRI",
          "hron": "every monday, wednesday, friday at 09:00"
        },
        {
          "name": "dow_named_range",
          "cron": "0 9 * * MON-FRI",
          "hron": "every weekday at 09:00"
        },
        {
          "name": "dow_named_range_tue_thu",
          "cron": "0 9 * * TUE-THU",
          "hron": "every tuesday, wednesday, thursday at 09:00"
        },
        {
          "name": "dow_named_lowercase",
          "cron": "0 9 * * mon,wed",
          "hron": "every monday, wednesday at 09:00"
        },
        {
          "name": "dow_named_weekend",
          "cron": "0 9 * * SAT,SUN",
          "hron": "every weekend at 09:00"
        },
        {
          "name": "dow_named_sun_only",
          "cron": "0 9 * * SUN",
          "hron": "every sunday at 09:00"
        },
        {
          "name": "question_mark_dom",
          "cron": "0 9 ? * 1",
          "hron": "every monday at 09:00"
        },
        {
          "name": "question_mark_dow",
          "cron": "0 9 15 * ?",
          "hron": "every month on the 15th at 09:00"
        },
        {
          "name": "question_mark_both_star",
          "cron": "0 9 ? * ?",
          "hron": "every day at 09:00"
        },
        {
          "name": "step_dom_odd_days",
          "cron": "0 9 1-31/2 * *",
          "hron": "every month on the 1st, 3rd, 5th, 7th, 9th, 11th, 13th, 15th, 17th, 19th, 21st, 23rd, 25th, 27th, 29th, 31st at 09:00"
        },
        {
          "name": "step_dom_every_5th",
          "cron": "0 9 1-31/5 * *",
          "hron": "every month on the 1st, 6th, 11th, 16th, 21st, 26th, 31st at 09:00"
        },
        {
          "name": "step_dom_every_10th",
          "cron": "0 9 1-31/10 * *",
          "hron": "every month on the 1st, 11th, 21st, 31st at 09:00"
        },
        {
          "name": "step_dom_partial_range",
          "cron": "0 9 5-20/3 * *",
          "hron": "every month on the 5th, 8th, 11th, 14th, 17th, 20th at 09:00"
        },
        {
          "name": "step_dow_every_other",
          "cron": "0 9 * * 1-5/2",
          "hron": "every monday, wednesday, friday at 09:00"
        },
        {
          "name": "step_dow_tue_thu",
          "cron": "0 9 * * 0-6/2",
          "hron": "every sunday, tuesday, thursday, saturday at 09:00"
        },
        {
          "name": "step_dow_star",
          "cron": "0 9 * * */2",
          "hron": "every sunday, tuesday, thursday, saturday at 09:00"
        },
        {
          "name": "step_minute_range",
          "cron": "0-30/10 9 * * *",
          "hron": "every 10 min from 09:00 to 09:30"
        },
        {
          "name": "step_minute_range_full",
          "cron": "0-59/15 * * * *",
          "hron": "every 15 min from 00:00 to 23:59"
        },
        {
          "name": "step_hour_range",
          "cron": "0 9-17/2 * * *",
          "hron": "every 2 hours from 09:00 to 17:00"
        },
        {
          "name": "step_month",
          "cron": "0 9 1 1-12/3 *",
          "hron": "every month on the 1st at 09:00 during jan, apr, jul, oct"
        },
        {
          "name": "step_month_star",
          "cron": "0 9 1 */3 *",
          "hron": "every month on the 1st at 09:00 during jan, apr, jul, oct"
        },
        {
          "name": "at_yearly",
          "cron": "@yearly",
          "hron": "every year on jan 1 at 00:00"
        },
        {
          "name": "at_annually",
          "cron": "@annually",
          "hron": "every year on jan 1 at 00:00"
        },
        {
          "name": "at_monthly",
          "cron": "@monthly",
          "hron": "every month on the 1st at 00:00"
        },
        {
          "name": "at_weekly",
          "cron": "@weekly",
          "hron": "every sunday at 00:00"
        },
        {
          "name": "at_daily",
          "cron": "@daily",
          "hron": "every day at 00:00"
        },
        {
          "name": "at_midnight",
          "cron": "@midnight",
          "hron": "every day at 00:00"
        },
        {
          "name": "at_hourly",
          "cron": "@hourly",
          "hron": "every 1 hour from 00:00 to 23:59"
        },
        {
          "name": "last_day",
          "cron": "0 9 L * *",
          "hron": "every month on the last day at 09:00"
        },
        {
          "name": "last_day_with_month",
          "cron": "0 9 L 3 *",
          "hron": "every month on the last day at 09:00 during mar"
        },
        {
          "name": "last_day_weekday",
          "cron": "0 9 LW * *",
          "hron": "every month on the last weekday at 09:00"
        },
        {
          "name": "nth_weekday_first_monday",
          "cron": "0 9 * * 1#1",
          "hron": "every month on the first monday at 09:00"
        },
        {
          "name": "nth_weekday_second_tuesday",
          "cron": "0 9 * * 2#2",
          "hron": "every month on the second tuesday at 09:00"
        },
        {
          "name": "nth_weekday_third_wednesday",
          "cron": "0 9 * * 3#3",
          "hron": "every month on the third wednesday at 09:00"
        },
        {
          "name": "nth_weekday_fourth_thursday",
          "cron": "0 9 * * 4#4",
          "hron": "every month on the fourth thursday at 09:00"
        },
        {
          "name": "nth_weekday_fifth_friday",
          "cron": "0 9 * * 5#5",
          "hron": "every month on the fifth friday at 09:00"
        },
        {
          "name": "nth_weekday_last_friday",
          "cron": "0 9 * * 5L",
          "hron": "every month on the last friday at 09:00"
        },
        {
          "name": "nth_weekday_last_monday",
          "cron": "0 9 * * 1L",
          "hron": "every month on the last monday at 09:00"
        },
        {
          "name": "nth_weekday_first_sunday",
          "cron": "0 9 * * 0#1",
          "hron": "every month on the first sunday at 09:00"
        },
        {
          "name": "nth_weekday_last_sunday",
          "cron": "0 9 * * 0L",
          "hron": "every month on the last sunday at 09:00"
        },
        {
          "name": "nth_weekday_named",
          "cron": "0 9 * * SUN#1",
          "hron": "every month on the first sunday at 09:00"
        },
        {
          "name": "dow_range_with_7",
          "cron": "0 9 * * 5-7",
          "hron": "every friday, saturday, sunday at 09:00"
        },
        {
          "name": "dow_step_range_with_7",
          "cron": "0 9 * * 5-7/1",
          "hron": "every friday, saturday, sunday at 09:00"
        },
        {
          "name": "dow_step_full_week_with_7",
          "cron": "0 9 * * 0-7/2",
          "hron": "every sunday, tuesday, thursday, saturday at 09:00"
        },
        {
          "name": "nearest_weekday_15",
          "cron": "0 9 15W * *",
          "hron": "every month on the nearest weekday to 15th at 09:00"
        },
        {
          "name": "nearest_weekday_1",
          "cron": "0 9 1W * *",
          "hron": "every month on the nearest weekday to 1st at 09:00"
        },
        {
          "name": "nearest_weekday_31",
          "cron": "0 17 31W * *",
          "hron": "every month on the nearest weekday to 31st at 17:00"
        },
        {
          "name": "nearest_weekday_with_month",
          "cron": "0 9 15W 3 *",
          "hron": "every month on the nearest weekday to 15th at 09:00 during mar"
        }
      ]
    },
    "from_cron_errors": {
      "description": "Invalid cron expressions that must fail.",
      "tests": [
        {
          "name": "too_few_fields",
          "cron": "0 9 * *",
          "description": "expected 5 fields, got 4"
        },
        {
          "name": "too_many_fields",
          "cron": "0 9 * * * *",
          "description": "expected 5 fields, got 6 (seconds not supported)"
        },
        {
          "name": "seven_fields",
          "cron": "0 0 9 * * * *",
          "description": "expected 5 fields, got 7 (seconds+year not supported)"
        },
        {
          "name": "invalid_dow_number",
          "cron": "0 9 * * 8",
          "description": "DOW must be 0-7"
        },
        {
          "name": "invalid_dom_number",
          "cron": "0 9 32 * *",
          "description": "DOM must be 1-31"
        },
        {
          "name": "invalid_dom_zero",
          "cron": "0 9 0 * *",
          "description": "DOM must be 1-31"
        },
        {
          "name": "invalid_hour",
          "cron": "0 25 * * *",
          "description": "hour must be 0-23"
        },
        {
          "name": "invalid_minute",
          "cron": "60 9 * * *",
          "description": "minute must be 0-59"
        },
        {
          "name": "invalid_month_number",
          "cron": "0 9 1 13 *",
          "description": "month must be 1-12"
        },
        {
          "name": "invalid_month_zero",
          "cron": "0 9 1 0 *",
          "description": "month must be 1-12"
        },
        {
          "name": "invalid_month_name",
          "cron": "0 9 1 FOO *",
          "description": "invalid month name"
        },
        {
          "name": "invalid_dow_name",
          "cron": "0 9 * * FOO",
          "description": "invalid day name"
        },
        {
          "name": "invalid_at_shortcut",
          "cron": "@invalid",
          "description": "unknown @ shortcut"
        },
        {
          "name": "invalid_nth_weekday_zero",
          "cron": "0 9 * * 1#0",
          "description": "nth must be 1-5"
        },
        {
          "name": "invalid_nth_weekday_six",
          "cron": "0 9 * * 1#6",
          "description": "nth must be 1-5"
        },
        {
          "name": "invalid_step_zero",
          "cron": "*/0 * * * *",
          "description": "step cannot be 0"
        },
        {
          "name": "invalid_range_reversed",
          "cron": "0 9 5-1 * *",
          "description": "range start must be <= end"
        },
        {
          "name": "invalid_dow_range_reversed",
          "cron": "0 9 * * 5-1",
          "description": "range start must be <= end"
        }
      ]
    },
    "roundtrip": {
      "description": "hron -> cron -> hron roundtrip. The cron produced from the first hron should, when converted back, produce the same cron again.",
      "tests": [
        {
          "name": "every_day",
          "hron": "every day at 9:00"
        },
        {
          "name": "weekday",
          "hron": "every weekday at 9:00"
        },
        {
          "name": "weekend",
          "hron": "every weekend at 10:00"
        },
        {
          "name": "monthly",
          "hron": "every month on the 1st at 9:00"
        },
        {
          "name": "interval_30min",
          "hron": "every 30 min from 00:00 to 23:59"
        },
        {
          "name": "specific_day",
          "hron": "every monday at 14:30"
        },
        {
          "name": "monthly_multi_day",
          "hron": "every month on the 1st, 15th at 9:00"
        },
        {
          "name": "day_range",
          "hron": "every month on the 1st to 5th at 9:00"
        },
        {
          "name": "day_range_mixed",
          "hron": "every month on the 1st to 3rd, 15th at 9:00"
        }
      ]
    }
  },
  "eval_errors": {
    "description": "Expressions that parse syntactically but error during evaluation. Languages that validate timezone at construction time may catch these at parse  both are acceptable.",
    "tests": [
      {
        "name": "invalid_timezone",
        "expression": "every day at 09:00 in Invalid/Timezone",
        "description": "invalid IANA timezone identifier"
      },
      {
        "name": "invalid_timezone_with_modifiers",
        "expression": "every weekday at 09:00 except dec 25 in Bogus/City",
        "description": "invalid timezone with modifier clauses"
      },
      {
        "name": "invalid_timezone_misspelled",
        "expression": "every day at 12:00 in Amercia/New_York",
        "description": "misspelled timezone name"
      }
    ]
  }
}
